(function(i){i.event.special.destroyed||(i.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}),i.fn.extend({maxlength:function(a,b){var R=i("body");function g(l){var t=l.charCodeAt();return t?t<128?1:t<2048?2:3:0}function p(l){return l.split("").map(g).concat(0).reduce(function(t,e){return t+e})}function x(l){var t=l.val();t=a.twoCharLinebreak?t.replace(/\r(?!\n)|\n(?!\r)/g,`\r
`):t.replace(/(?:\r\n|\r|\n)/g,`
`);var e=0;return e=a.utf8?p(t):t.length,l.prop("type")==="file"&&l.val()!==""&&(e-=12),e}function y(l,t){return t-x(l)}function u(l,t){t.css({display:"block"}),l.trigger("maxlength.shown")}function M(l,t,e){var s="";return a.message?s=typeof a.message=="function"?a.message(l,t):a.message.replace("%charsTyped%",e).replace("%charsRemaining%",t-e).replace("%charsTotal%",t):(a.preText&&(s+=a.preText),a.showCharsTyped?s+=e:s+=t-e,a.showMaxLength&&(s+=a.separator+t),a.postText&&(s+=a.postText)),s}function k(l,t,e,s){var c,n,f,h;s&&(s.html(M(t.val(),e,e-l)),l>0?(c=t,n=a.threshold,f=e,h=!0,!a.alwaysShow&&f-x(c)>n&&(h=!1),h?u(t,s.removeClass(a.limitReachedClass+" "+a.limitExceededClass).addClass(a.warningClass)):function(r,d){a.alwaysShow||(d.css({display:"none"}),r.trigger("maxlength.hidden"))}(t,s)):a.limitExceededClass?u(t,l===0?s.removeClass(a.warningClass+" "+a.limitExceededClass).addClass(a.limitReachedClass):s.removeClass(a.warningClass+" "+a.limitReachedClass).addClass(a.limitExceededClass)):u(t,s.removeClass(a.warningClass).addClass(a.limitReachedClass))),a.customMaxAttribute&&(l<0?t.addClass(a.customMaxClass):t.removeClass(a.customMaxClass))}function m(l,t){var e=function(h){var r=h[0];return i.extend({},typeof r.getBoundingClientRect=="function"?r.getBoundingClientRect():{width:r.offsetWidth,height:r.offsetHeight},h.offset())}(l);if(i.type(a.placement)!=="function")if(i.isPlainObject(a.placement))(function(h,r){if(h&&r){var d={};i.each(["top","bottom","left","right","position"],function(C,o){var v=a.placement[o];v!==void 0&&(d[o]=v)}),r.css(d)}})(a.placement,t);else{var s=l.outerWidth(),c=t.outerWidth(),n=t.width(),f=t.height();switch(a.appendToParent&&(e.top-=l.parent().offset().top,e.left-=l.parent().offset().left),a.placement){case"bottom":t.css({top:e.top+e.height,left:e.left+e.width/2-n/2});break;case"top":t.css({top:e.top-f,left:e.left+e.width/2-n/2});break;case"left":t.css({top:e.top+e.height/2-f/2,left:e.left-n});break;case"right":t.css({top:e.top+e.height/2-f/2,left:e.left+e.width});break;case"bottom-right":t.css({top:e.top+e.height,left:e.left+e.width});break;case"top-right":t.css({top:e.top-f,left:e.left+s});break;case"top-left":t.css({top:e.top-f,left:e.left-c});break;case"bottom-left":t.css({top:e.top+l.outerHeight(),left:e.left-c});break;case"centered-right":t.css({top:e.top+f/2,left:e.left+s-c-3});break;case"bottom-right-inside":t.css({top:e.top+e.height,left:e.left+e.width-c});break;case"top-right-inside":t.css({top:e.top-f,left:e.left+s-c});break;case"top-left-inside":t.css({top:e.top-f,left:e.left});break;case"bottom-left-inside":t.css({top:e.top+l.outerHeight(),left:e.left})}}else a.placement(l,t,e)}function w(l){var t=l.attr("maxlength")||a.customMaxAttribute;if(a.customMaxAttribute&&!a.allowOverMax){var e=l.attr(a.customMaxAttribute);(!t||e<t)&&(t=e)}return t||(t=l.attr("size")),t}return i.isFunction(a)&&!b&&(b=a,a={}),a=i.extend({showOnReady:!1,alwaysShow:!0,threshold:0,warningClass:"small form-text text-muted",limitReachedClass:"small form-text text-danger",limitExceededClass:"",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom-right-inside",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,customMaxAttribute:null,customMaxClass:"overmax",allowOverMax:!1,zIndex:1099},a),this.each(function(){var l,t,e=i(this);function s(){var c=M(e.val(),l,"0");l=w(e),t||(t=i('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:a.zIndex}).html(c)),e.is("textarea")&&(e.data("maxlenghtsizex",e.outerWidth()),e.data("maxlenghtsizey",e.outerHeight()),e.mouseup(function(){e.outerWidth()===e.data("maxlenghtsizex")&&e.outerHeight()===e.data("maxlenghtsizey")||m(e,t),e.data("maxlenghtsizex",e.outerWidth()),e.data("maxlenghtsizey",e.outerHeight())})),a.appendToParent?(e.parent().append(t),e.parent().css("position","relative")):R.append(t),k(y(e,w(e)),e,l,t),m(e,t)}i(window).resize(function(){t&&m(e,t)}),a.showOnReady?e.ready(function(){s()}):e.focus(function(){s()}),e.on("maxlength.reposition",function(){m(e,t)}),e.on("destroyed",function(){t&&t.remove()}),e.on("blur",function(){t&&!a.showOnReady&&t.remove()}),e.on("input",function(){var c=w(e),n=y(e,c),f=!0;return a.validate&&n<0?(function(h,r){var d=h.val();if(a.twoCharLinebreak&&(d=d.replace(/\r(?!\n)|\n(?!\r)/g,`\r
`))[d.length-1]===`
`&&(r-=d.length%2),a.utf8){for(var C=d.split("").map(g),o=0,v=p(d)-r;o<v;o+=C.pop());r-=r-C.length}h.val(d.substr(0,r))}(e,c),f=!1):k(n,e,l,t),f})})}})})(jQuery);
