import{c as ie}from"./_commonjsHelpers-042e6b4d.js";import{r as be}from"./jquery-4e911315.js";var pe={},xe={get exports(){return pe},set exports(U){pe=U}},se={},Se={get exports(){return se},set exports(U){se=U}},de;function $e(){return de||(de=1,function(U,fe){(function(c,q){U.exports=q()})(ie,function(){var c=function(a,u){this.items=a,this.settings=u||{diacritics:!0}};c.prototype.tokenize=function(a){if(a=C(String(a||"").toLowerCase()),!a||!a.length)return[];var u,l,d,f,w=[],O=a.split(/ +/);for(u=0,l=O.length;u<l;u++){if(d=F(O[u]),this.settings.diacritics)for(f in E)E.hasOwnProperty(f)&&(d=d.replace(new RegExp(f,"g"),E[f]));w.push({string:O[u],regex:new RegExp(d,"i")})}return w},c.prototype.iterator=function(a,u){var l;D(a)?l=Array.prototype.forEach||function(d){for(var f=0,w=this.length;f<w;f++)d(this[f],f,this)}:l=function(d){for(var f in this)this.hasOwnProperty(f)&&d(this[f],f,this)},l.apply(a,[u])},c.prototype.getScoreFunction=function(a,u){var l,d,f,w,O;l=this,a=l.prepareSearch(a,u),f=a.tokens,d=a.options.fields,w=f.length,O=a.options.nesting;var A=function(_,b){var x,S;return!_||(_=String(_||""),S=_.search(b.regex),S===-1)?0:(x=b.string.length/_.length,S===0&&(x+=.5),x)},T=function(){var _=d.length;return _?_===1?function(b,x){return A(m(x,d[0],O),b)}:function(b,x){for(var S=0,L=0;S<_;S++)L+=A(m(x,d[S],O),b);return L/_}:function(){return 0}}();return w?w===1?function(_){return T(f[0],_)}:a.options.conjunction==="and"?function(_){for(var b,x=0,S=0;x<w;x++){if(b=T(f[x],_),b<=0)return 0;S+=b}return S/w}:function(_){for(var b=0,x=0;b<w;b++)x+=T(f[b],_);return x/w}:function(){return 0}},c.prototype.getSortFunction=function(a,u){var l,d,f,w,O,A,T,_,b,x,S;if(f=this,a=f.prepareSearch(a,u),S=!a.query&&u.sort_empty||u.sort,b=function(L,B){return L==="$score"?B.score:m(f.items[B.id],L,u.nesting)},O=[],S)for(l=0,d=S.length;l<d;l++)(a.query||S[l].field!=="$score")&&O.push(S[l]);if(a.query){for(x=!0,l=0,d=O.length;l<d;l++)if(O[l].field==="$score"){x=!1;break}x&&O.unshift({field:"$score",direction:"desc"})}else for(l=0,d=O.length;l<d;l++)if(O[l].field==="$score"){O.splice(l,1);break}for(_=[],l=0,d=O.length;l<d;l++)_.push(O[l].direction==="desc"?-1:1);return A=O.length,A?A===1?(w=O[0].field,T=_[0],function(L,B){return T*q(b(w,L),b(w,B))}):function(L,B){var Q,N,J;for(Q=0;Q<A;Q++)if(J=O[Q].field,N=_[Q]*q(b(J,L),b(J,B)),N)return N;return 0}:null},c.prototype.prepareSearch=function(a,u){if(typeof a=="object")return a;u=P({},u);var l=u.fields,d=u.sort,f=u.sort_empty;return l&&!D(l)&&(u.fields=[l]),d&&!D(d)&&(u.sort=[d]),f&&!D(f)&&(u.sort_empty=[f]),{options:u,query:String(a||"").toLowerCase(),tokens:this.tokenize(a),total:0,items:[]}},c.prototype.search=function(a,u){var l=this,d,f,w,O;return f=this.prepareSearch(a,u),u=f.options,a=f.query,O=u.score||l.getScoreFunction(f),a.length?l.iterator(l.items,function(A,T){d=O(A),(u.filter===!1||d>0)&&f.items.push({score:d,id:T})}):l.iterator(l.items,function(A,T){f.items.push({score:1,id:T})}),w=l.getSortFunction(f,u),w&&f.items.sort(w),f.total=f.items.length,typeof u.limit=="number"&&(f.items=f.items.slice(0,u.limit)),f};var q=function(a,u){return typeof a=="number"&&typeof u=="number"?a>u?1:a<u?-1:0:(a=j(String(a||"")),u=j(String(u||"")),a>u?1:u>a?-1:0)},P=function(a,u){var l,d,f,w;for(l=1,d=arguments.length;l<d;l++)if(w=arguments[l],!!w)for(f in w)w.hasOwnProperty(f)&&(a[f]=w[f]);return a},m=function(a,u,l){if(!(!a||!u)){if(!l)return a[u];for(var d=u.split(".");d.length&&(a=a[d.shift()]););return a}},C=function(a){return(a+"").replace(/^\s+|\s+$|/g,"")},F=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},D=Array.isArray||typeof $<"u"&&$.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},E={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},j=function(){var a,u,l,d,f="",w={};for(l in E)if(E.hasOwnProperty(l))for(d=E[l].substring(2,E[l].length-1),f+=d,a=0,u=d.length;a<u;a++)w[d.charAt(a)]=l;var O=new RegExp("["+f+"]","g");return function(A){return A.replace(O,function(T){return w[T]}).toLowerCase()}}();return c})}(Se)),se}var oe={},Ie={get exports(){return oe},set exports(U){oe=U}},he;function ke(){return he||(he=1,function(U,fe){(function(c,q){U.exports=q()})(ie,function(){var c={};c.mixin=function(P){P.plugins={},P.prototype.initializePlugins=function(m){var C,F,D,E=this,j=[];if(E.plugins={names:[],settings:{},requested:{},loaded:{}},q.isArray(m))for(C=0,F=m.length;C<F;C++)typeof m[C]=="string"?j.push(m[C]):(E.plugins.settings[m[C].name]=m[C].options,j.push(m[C].name));else if(m)for(D in m)m.hasOwnProperty(D)&&(E.plugins.settings[D]=m[D],j.push(D));for(;j.length;)E.require(j.shift())},P.prototype.loadPlugin=function(m){var C=this,F=C.plugins,D=P.plugins[m];if(!P.plugins.hasOwnProperty(m))throw new Error('Unable to find "'+m+'" plugin');F.requested[m]=!0,F.loaded[m]=D.fn.apply(C,[C.plugins.settings[m]||{}]),F.names.push(m)},P.prototype.require=function(m){var C=this,F=C.plugins;if(!C.plugins.loaded.hasOwnProperty(m)){if(F.requested[m])throw new Error('Plugin has circular dependency ("'+m+'")');C.loadPlugin(m)}return F.loaded[m]},P.define=function(m,C){P.plugins[m]={name:m,fn:C}}};var q={isArray:Array.isArray||function(P){return Object.prototype.toString.call(P)==="[object Array]"}};return c})}(Ie)),oe}(function(U,fe){(function(c,q){U.exports=q()})(ie,function(){var c=function(a,u){this.items=a,this.settings=u||{diacritics:!0}};c.prototype.tokenize=function(a){if(a=C(String(a||"").toLowerCase()),!a||!a.length)return[];var u,l,d,f,w=[],O=a.split(/ +/);for(u=0,l=O.length;u<l;u++){if(d=F(O[u]),this.settings.diacritics)for(f in E)E.hasOwnProperty(f)&&(d=d.replace(new RegExp(f,"g"),E[f]));w.push({string:O[u],regex:new RegExp(d,"i")})}return w},c.prototype.iterator=function(a,u){var l;D(a)?l=Array.prototype.forEach||function(d){for(var f=0,w=this.length;f<w;f++)d(this[f],f,this)}:l=function(d){for(var f in this)this.hasOwnProperty(f)&&d(this[f],f,this)},l.apply(a,[u])},c.prototype.getScoreFunction=function(a,u){var l,d,f,w,O;l=this,a=l.prepareSearch(a,u),f=a.tokens,d=a.options.fields,w=f.length,O=a.options.nesting;var A=function(_,b){var x,S;return!_||(_=String(_||""),S=_.search(b.regex),S===-1)?0:(x=b.string.length/_.length,S===0&&(x+=.5),x)},T=function(){var _=d.length;return _?_===1?function(b,x){return A(m(x,d[0],O),b)}:function(b,x){for(var S=0,L=0;S<_;S++)L+=A(m(x,d[S],O),b);return L/_}:function(){return 0}}();return w?w===1?function(_){return T(f[0],_)}:a.options.conjunction==="and"?function(_){for(var b,x=0,S=0;x<w;x++){if(b=T(f[x],_),b<=0)return 0;S+=b}return S/w}:function(_){for(var b=0,x=0;b<w;b++)x+=T(f[b],_);return x/w}:function(){return 0}},c.prototype.getSortFunction=function(a,u){var l,d,f,w,O,A,T,_,b,x,S;if(f=this,a=f.prepareSearch(a,u),S=!a.query&&u.sort_empty||u.sort,b=function(L,B){return L==="$score"?B.score:m(f.items[B.id],L,u.nesting)},O=[],S)for(l=0,d=S.length;l<d;l++)(a.query||S[l].field!=="$score")&&O.push(S[l]);if(a.query){for(x=!0,l=0,d=O.length;l<d;l++)if(O[l].field==="$score"){x=!1;break}x&&O.unshift({field:"$score",direction:"desc"})}else for(l=0,d=O.length;l<d;l++)if(O[l].field==="$score"){O.splice(l,1);break}for(_=[],l=0,d=O.length;l<d;l++)_.push(O[l].direction==="desc"?-1:1);return A=O.length,A?A===1?(w=O[0].field,T=_[0],function(L,B){return T*q(b(w,L),b(w,B))}):function(L,B){var Q,N,J;for(Q=0;Q<A;Q++)if(J=O[Q].field,N=_[Q]*q(b(J,L),b(J,B)),N)return N;return 0}:null},c.prototype.prepareSearch=function(a,u){if(typeof a=="object")return a;u=P({},u);var l=u.fields,d=u.sort,f=u.sort_empty;return l&&!D(l)&&(u.fields=[l]),d&&!D(d)&&(u.sort=[d]),f&&!D(f)&&(u.sort_empty=[f]),{options:u,query:String(a||"").toLowerCase(),tokens:this.tokenize(a),total:0,items:[]}},c.prototype.search=function(a,u){var l=this,d,f,w,O;return f=this.prepareSearch(a,u),u=f.options,a=f.query,O=u.score||l.getScoreFunction(f),a.length?l.iterator(l.items,function(A,T){d=O(A),(u.filter===!1||d>0)&&f.items.push({score:d,id:T})}):l.iterator(l.items,function(A,T){f.items.push({score:1,id:T})}),w=l.getSortFunction(f,u),w&&f.items.sort(w),f.total=f.items.length,typeof u.limit=="number"&&(f.items=f.items.slice(0,u.limit)),f};var q=function(a,u){return typeof a=="number"&&typeof u=="number"?a>u?1:a<u?-1:0:(a=j(String(a||"")),u=j(String(u||"")),a>u?1:u>a?-1:0)},P=function(a,u){var l,d,f,w;for(l=1,d=arguments.length;l<d;l++)if(w=arguments[l],!!w)for(f in w)w.hasOwnProperty(f)&&(a[f]=w[f]);return a},m=function(a,u,l){if(!(!a||!u)){if(!l)return a[u];for(var d=u.split(".");d.length&&(a=a[d.shift()]););return a}},C=function(a){return(a+"").replace(/^\s+|\s+$|/g,"")},F=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},D=Array.isArray||typeof $<"u"&&$.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},E={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},j=function(){var a,u,l,d,f="",w={};for(l in E)if(E.hasOwnProperty(l))for(d=E[l].substring(2,E[l].length-1),f+=d,a=0,u=d.length;a<u;a++)w[d.charAt(a)]=l;var O=new RegExp("["+f+"]","g");return function(A){return A.replace(O,function(T){return w[T]}).toLowerCase()}}();return c}),function(c,q){U.exports=q()}(ie,function(){var c={};c.mixin=function(P){P.plugins={},P.prototype.initializePlugins=function(m){var C,F,D,E=this,j=[];if(E.plugins={names:[],settings:{},requested:{},loaded:{}},q.isArray(m))for(C=0,F=m.length;C<F;C++)typeof m[C]=="string"?j.push(m[C]):(E.plugins.settings[m[C].name]=m[C].options,j.push(m[C].name));else if(m)for(D in m)m.hasOwnProperty(D)&&(E.plugins.settings[D]=m[D],j.push(D));for(;j.length;)E.require(j.shift())},P.prototype.loadPlugin=function(m){var C=this,F=C.plugins,D=P.plugins[m];if(!P.plugins.hasOwnProperty(m))throw new Error('Unable to find "'+m+'" plugin');F.requested[m]=!0,F.loaded[m]=D.fn.apply(C,[C.plugins.settings[m]||{}]),F.names.push(m)},P.prototype.require=function(m){var C=this,F=C.plugins;if(!C.plugins.loaded.hasOwnProperty(m)){if(F.requested[m])throw new Error('Plugin has circular dependency ("'+m+'")');C.loadPlugin(m)}return F.loaded[m]},P.define=function(m,C){P.plugins[m]={name:m,fn:C}}};var q={isArray:Array.isArray||function(P){return Object.prototype.toString.call(P)==="[object Array]"}};return c}),function(c,q){U.exports=q(be(),$e(),ke())}(ie,function(c,q,P){var m=function(e,t){if(!(typeof t=="string"&&!t.length)){var r=typeof t=="string"?new RegExp(t,"i"):t,i=function(s){var n=0;if(s.nodeType===3){var o=s.data.search(r);if(o>=0&&s.data.length>0){var v=s.data.match(r),p=document.createElement("span");p.className="highlight";var h=s.splitText(o);h.splitText(v[0].length);var y=h.cloneNode(!0);p.appendChild(y),h.parentNode.replaceChild(p,h),n=1}}else if(s.nodeType===1&&s.childNodes&&!/(script|style)/i.test(s.tagName)&&(s.className!=="highlight"||s.tagName!=="SPAN"))for(var z=0;z<s.childNodes.length;++z)z+=i(s.childNodes[z]);return n};return e.each(function(){i(this)})}};c.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var C=function(){};C.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var r=arguments.length;if(r===0)return delete this._events;if(r===1)return delete this._events[e];this._events=this._events||{},e in this._events&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},C.mixin=function(e){for(var t=["on","off","trigger"],r=0;r<t.length;r++)e.prototype[t[r]]=C.prototype[t[r]]};var F=/Mac/.test(navigator.userAgent),D=65,E=13,j=27,a=37,u=38,l=80,d=39,f=40,w=78,O=8,A=46,T=16,_=F?91:17,b=F?18:17,x=9,S=1,L=2,B=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,Q=function(e){return typeof e<"u"},N=function(e){return typeof e>"u"||e===null?null:typeof e=="boolean"?e?"1":"0":e+""},J=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},ne={};ne.before=function(e,t,r){var i=e[t];e[t]=function(){return r.apply(e,arguments),i.apply(e,arguments)}},ne.after=function(e,t,r){var i=e[t];e[t]=function(){var s=i.apply(e,arguments);return r.apply(e,arguments),s}};var ge=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},ve=function(e,t){var r;return function(){var i=this,s=arguments;window.clearTimeout(r),r=window.setTimeout(function(){e.apply(i,s)},t)}},ce=function(e,t,r){var i,s=e.trigger,n={};e.trigger=function(){var o=arguments[0];if(t.indexOf(o)!==-1)n[o]=arguments;else return s.apply(e,arguments)},r.apply(e,[]),e.trigger=s;for(i in n)n.hasOwnProperty(i)&&s.apply(e,n[i])},me=function(e,t,r,i){e.on(t,r,function(s){for(var n=s.target;n&&n.parentNode!==e[0];)n=n.parentNode;return s.currentTarget=n,i.apply(this,[s])})},ae=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var r=document.selection.createRange(),i=document.selection.createRange().text.length;r.moveStart("character",-e.value.length),t.start=r.text.length-i,t.length=i}return t},ye=function(e,t,r){var i,s,n={};if(r)for(i=0,s=r.length;i<s;i++)n[r[i]]=e.css(r[i]);else n=e.css();t.css(n)},we=function(e,t){return e?(K.$testInput||(K.$testInput=c("<span />").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).appendTo("body")),K.$testInput.text(e),ye(t,K.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),K.$testInput.width()):0},Oe=function(e){var t=null,r=function(i,s){var n,o,v,p,h,y,z,I;i=i||window.event||{},s=s||{},!(i.metaKey||i.altKey)&&(!s.force&&e.data("grow")===!1||(n=e.val(),i.type&&i.type.toLowerCase()==="keydown"&&(o=i.keyCode,v=o>=48&&o<=57||o>=65&&o<=90||o>=96&&o<=111||o>=186&&o<=222||o===32,o===A||o===O?(I=ae(e[0]),I.length?n=n.substring(0,I.start)+n.substring(I.start+I.length):o===O&&I.start?n=n.substring(0,I.start-1)+n.substring(I.start+1):o===A&&typeof I.start<"u"&&(n=n.substring(0,I.start)+n.substring(I.start+1))):v&&(y=i.shiftKey,z=String.fromCharCode(i.keyCode),y?z=z.toUpperCase():z=z.toLowerCase(),n+=z)),p=e.attr("placeholder"),!n&&p&&(n=p),h=we(n,e)+4,h!==t&&(t=h,e.width(h),e.triggerHandler("resize"))))};e.on("keydown keyup update blur",r),r()},Ce=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},_e=function(e,t){t||(t={});var r="Selectize";console.error(r+": "+e),t.explanation&&(console.group&&console.group(),console.error(t.explanation),console.group&&console.groupEnd())},K=function(e,t){var r,i,s,n,o=this;n=e[0],n.selectize=o;var v=window.getComputedStyle&&window.getComputedStyle(n,null);if(s=v?v.getPropertyValue("direction"):n.currentStyle&&n.currentStyle.direction,s=s||e.parents("[dir]:first").attr("dir")||"",c.extend(o,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:n.tagName.toLowerCase()==="select"?S:L,rtl:/rtl/i.test(s),eventNS:".selectize"+ ++K.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:t.loadThrottle===null?o.onSearchChange:ve(o.onSearchChange,t.loadThrottle)}),o.sifter=new q(this.options,{diacritics:t.diacritics}),o.settings.options){for(r=0,i=o.settings.options.length;r<i;r++)o.registerOption(o.settings.options[r]);delete o.settings.options}if(o.settings.optgroups){for(r=0,i=o.settings.optgroups.length;r<i;r++)o.registerOptionGroup(o.settings.optgroups[r]);delete o.settings.optgroups}o.settings.mode=o.settings.mode||(o.settings.maxItems===1?"single":"multi"),typeof o.settings.hideSelected!="boolean"&&(o.settings.hideSelected=o.settings.mode==="multi"),o.initializePlugins(o.settings.plugins),o.setupCallbacks(),o.setupTemplates(),o.setup()};return C.mixin(K),typeof P<"u"?P.mixin(K):_e("Dependency MicroPlugin is missing",{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),c.extend(K.prototype,{setup:function(){var e=this,t=e.settings,r=e.eventNS,i=c(window),s=c(document),n=e.$input,o,v,p,h,y,z,I,V,k,H;if(I=e.settings.mode,V=n.attr("class")||"",o=c("<div>").addClass(t.wrapperClass).addClass(V).addClass(I),v=c("<div>").addClass(t.inputClass).addClass("items").appendTo(o),p=c('<input type="text" autocomplete="off" />').appendTo(v).attr("tabindex",n.is(":disabled")?"-1":e.tabIndex),z=c(t.dropdownParent||o),h=c("<div>").addClass(t.dropdownClass).addClass(I).hide().appendTo(z),y=c("<div>").addClass(t.dropdownContentClass).appendTo(h),(H=n.attr("id"))&&(p.attr("id",H+"-selectized"),c("label[for='"+H+"']").attr("for",H+"-selectized")),e.settings.copyClassesToDropdown&&h.addClass(V),o.css({width:n[0].style.width}),e.plugins.names.length&&(k="plugin-"+e.plugins.names.join(" plugin-"),o.addClass(k),h.addClass(k)),(t.maxItems===null||t.maxItems>1)&&e.tagType===S&&n.attr("multiple","multiple"),e.settings.placeholder&&p.attr("placeholder",t.placeholder),!e.settings.splitOn&&e.settings.delimiter){var Y=e.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");e.settings.splitOn=new RegExp("\\s*"+Y+"+\\s*")}n.attr("autocorrect")&&p.attr("autocorrect",n.attr("autocorrect")),n.attr("autocapitalize")&&p.attr("autocapitalize",n.attr("autocapitalize")),p[0].type=n[0].type,e.$wrapper=o,e.$control=v,e.$control_input=p,e.$dropdown=h,e.$dropdown_content=y,h.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",function(g){g.stopImmediatePropagation()}),h.on("mouseenter","[data-selectable]",function(){return e.onOptionHover.apply(e,arguments)}),h.on("mousedown click","[data-selectable]",function(){return e.onOptionSelect.apply(e,arguments)}),me(v,"mousedown","*:not(input)",function(){return e.onItemSelect.apply(e,arguments)}),Oe(p),v.on({mousedown:function(){return e.onMouseDown.apply(e,arguments)},click:function(){return e.onClick.apply(e,arguments)}}),p.on({mousedown:function(g){g.stopPropagation()},keydown:function(){return e.onKeyDown.apply(e,arguments)},keyup:function(){return e.onKeyUp.apply(e,arguments)},keypress:function(){return e.onKeyPress.apply(e,arguments)},resize:function(){e.positionDropdown.apply(e,[])},blur:function(){return e.onBlur.apply(e,arguments)},focus:function(){return e.ignoreBlur=!1,e.onFocus.apply(e,arguments)},paste:function(){return e.onPaste.apply(e,arguments)}}),s.on("keydown"+r,function(g){e.isCmdDown=g[F?"metaKey":"ctrlKey"],e.isCtrlDown=g[F?"altKey":"ctrlKey"],e.isShiftDown=g.shiftKey}),s.on("keyup"+r,function(g){g.keyCode===b&&(e.isCtrlDown=!1),g.keyCode===T&&(e.isShiftDown=!1),g.keyCode===_&&(e.isCmdDown=!1)}),s.on("mousedown"+r,function(g){if(e.isFocused){if(g.target===e.$dropdown[0]||g.target.parentNode===e.$dropdown[0])return!1;!e.$control.has(g.target).length&&g.target!==e.$control[0]&&e.blur(g.target)}}),i.on(["scroll"+r,"resize"+r].join(" "),function(){e.isOpen&&e.positionDropdown.apply(e,arguments)}),i.on("mousemove"+r,function(){e.ignoreHover=!1}),this.revertSettings={$children:n.children().detach(),tabindex:n.attr("tabindex")},n.attr("tabindex",-1).hide().after(e.$wrapper),c.isArray(t.items)&&(e.setValue(t.items),delete t.items),B&&n.on("invalid"+r,function(g){g.preventDefault(),e.isInvalid=!0,e.refreshState()}),e.updateOriginalInput(),e.refreshItems(),e.refreshState(),e.updatePlaceholder(),e.isSetup=!0,n.is(":disabled")&&e.disable(),e.on("change",this.onChange),n.data("selectize",e),n.addClass("selectized"),e.trigger("initialize"),t.preload===!0&&e.onSearchChange("")},setupTemplates:function(){var e=this,t=e.settings.labelField,r=e.settings.optgroupLabelField,i={optgroup:function(s){return'<div class="optgroup">'+s.html+"</div>"},optgroup_header:function(s,n){return'<div class="optgroup-header">'+n(s[r])+"</div>"},option:function(s,n){return'<div class="option">'+n(s[t])+"</div>"},item:function(s,n){return'<div class="item">'+n(s[t])+"</div>"},option_create:function(s,n){return'<div class="create">Add <strong>'+n(s.input)+"</strong>&hellip;</div>"}};e.settings.render=c.extend({},i,e.settings.render)},setupCallbacks:function(){var e,t,r={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in r)r.hasOwnProperty(e)&&(t=this.settings[r[e]],t&&this.on(e,t))},onClick:function(e){var t=this;(!t.isFocused||!t.isOpen)&&(t.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,r=e.isDefaultPrevented();if(c(e.target),t.isFocused){if(e.target!==t.$control_input[0])return t.settings.mode==="single"?t.isOpen?t.close():t.open():r||t.setActiveItem(null),!1}else r||window.setTimeout(function(){t.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var t=this;if(t.isFull()||t.isInputHidden||t.isLocked){e.preventDefault();return}t.settings.splitOn&&setTimeout(function(){var r=t.$control_input.val();if(r.match(t.settings.splitOn))for(var i=c.trim(r).split(t.settings.splitOn),s=0,n=i.length;s<n;s++)t.createItem(i[s])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);if(this.settings.create&&this.settings.mode==="multi"&&t===this.settings.delimiter)return this.createItem(),e.preventDefault(),!1},onKeyDown:function(e){e.target,this.$control_input[0];var t=this;if(t.isLocked){e.keyCode!==x&&e.preventDefault();return}switch(e.keyCode){case D:if(t.isCmdDown){t.selectAll();return}break;case j:t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close());return;case w:if(!e.ctrlKey||e.altKey)break;case f:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var r=t.getAdjacentOption(t.$activeOption,1);r.length&&t.setActiveOption(r,!0,!0)}e.preventDefault();return;case l:if(!e.ctrlKey||e.altKey)break;case u:if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,-1);i.length&&t.setActiveOption(i,!0,!0)}e.preventDefault();return;case E:t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault());return;case a:t.advanceSelection(-1,e);return;case d:t.advanceSelection(1,e);return;case x:t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),t.settings.create&&t.createItem()&&e.preventDefault();return;case O:case A:t.deleteSelection(e);return}if((t.isFull()||t.isInputHidden)&&!(F?e.metaKey:e.ctrlKey)){e.preventDefault();return}},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var r=t.$control_input.val()||"";t.lastValue!==r&&(t.lastValue=r,t.onSearchChange(r),t.refreshOptions(),t.trigger("type",r))},onSearchChange:function(e){var t=this,r=t.settings.load;r&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(i){r.apply(t,[e,i])})))},onFocus:function(e){var t=this,r=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,t.settings.preload==="focus"&&t.onSearchChange(""),r||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var r=this;if(r.isFocused&&(r.isFocused=!1,!r.ignoreFocus)){if(!r.ignoreBlur&&document.activeElement===r.$dropdown_content[0]){r.ignoreBlur=!0,r.onFocus(e);return}var i=function(){r.close(),r.setTextboxValue(""),r.setActiveItem(null),r.setActiveOption(null),r.setCaret(r.items.length),r.refreshState(),t&&t.focus&&t.focus(),r.isBlurring=!1,r.ignoreFocus=!1,r.trigger("blur")};r.isBlurring=!0,r.ignoreFocus=!0,r.settings.create&&r.settings.createOnBlur?r.createItem(null,!1,i):i()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,r,i=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),r=c(e.currentTarget),r.hasClass("create")?i.createItem(null,function(){i.settings.closeAfterSelect&&i.close()}):(t=r.attr("data-value"),typeof t<"u"&&(i.lastQuery=null,i.setTextboxValue(""),i.addItem(t),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&i.setActiveOption(i.getOption(t))))},onItemSelect:function(e){var t=this;t.isLocked||t.settings.mode==="multi"&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,r=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(i){t.loading=Math.max(t.loading-1,0),i&&i.length&&(t.addOption(i),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||r.removeClass(t.settings.loadingClass),t.trigger("load",i)}])},setTextboxValue:function(e){var t=this.$control_input,r=t.val()!==e;r&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===S&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var r=t?[]:["change"];ce(this,r,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(e,t){var r=this,i,s,n,o,v,p,h,y;if(r.settings.mode!=="single"){if(e=c(e),!e.length){c(r.$activeItems).removeClass("active"),r.$activeItems=[],r.isFocused&&r.showInput();return}if(i=t&&t.type.toLowerCase(),i==="mousedown"&&r.isShiftDown&&r.$activeItems.length){for(y=r.$control.children(".active:last"),o=Array.prototype.indexOf.apply(r.$control[0].childNodes,[y[0]]),v=Array.prototype.indexOf.apply(r.$control[0].childNodes,[e[0]]),o>v&&(h=o,o=v,v=h),s=o;s<=v;s++)p=r.$control[0].childNodes[s],r.$activeItems.indexOf(p)===-1&&(c(p).addClass("active"),r.$activeItems.push(p));t.preventDefault()}else i==="mousedown"&&r.isCtrlDown||i==="keydown"&&this.isShiftDown?e.hasClass("active")?(n=r.$activeItems.indexOf(e[0]),r.$activeItems.splice(n,1),e.removeClass("active")):r.$activeItems.push(e.addClass("active")[0]):(c(r.$activeItems).removeClass("active"),r.$activeItems=[e.addClass("active")[0]]);r.hideInput(),this.isFocused||r.focus()}},setActiveOption:function(e,t,r){var i,s,n,o,v,p=this;p.$activeOption&&p.$activeOption.removeClass("active"),p.$activeOption=null,e=c(e),e.length&&(p.$activeOption=e.addClass("active"),(t||!Q(t))&&(i=p.$dropdown_content.height(),s=p.$activeOption.outerHeight(!0),t=p.$dropdown_content.scrollTop()||0,n=p.$activeOption.offset().top-p.$dropdown_content.offset().top+t,o=n,v=n-i+s,n+s>i+t?p.$dropdown_content.stop().animate({scrollTop:v},r?p.settings.scrollDuration:0):n<t&&p.$dropdown_content.stop().animate({scrollTop:o},r?p.settings.scrollDuration:0)))},selectAll:function(){var e=this;e.settings.mode!=="single"&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return typeof t=="string"&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}},search:function(e){var t,r,i,s=this,n=s.settings,o=this.getSearchOptions();if(n.score&&(i=s.settings.score.apply(this,[e]),typeof i!="function"))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==s.lastQuery?(s.lastQuery=e,r=s.sifter.search(e,c.extend(o,{score:i})),s.currentResults=r):r=c.extend(!0,{},s.currentResults),n.hideSelected)for(t=r.items.length-1;t>=0;t--)s.items.indexOf(N(r.items[t].id))!==-1&&r.items.splice(t,1);return r},refreshOptions:function(e){var t,r,i,s,n,o,v,p,h,y,z,I,V,k,H,Y;typeof e>"u"&&(e=!0);var g=this,te=c.trim(g.$control_input.val()),M=g.search(te),ee=g.$dropdown_content,re=g.$activeOption&&N(g.$activeOption.attr("data-value"));for(s=M.items.length,typeof g.settings.maxOptions=="number"&&(s=Math.min(s,g.settings.maxOptions)),n={},o=[],t=0;t<s;t++)for(v=g.options[M.items[t].id],p=g.render("option",v),h=v[g.settings.optgroupField]||"",y=c.isArray(h)?h:[h],r=0,i=y&&y.length;r<i;r++)h=y[r],g.optgroups.hasOwnProperty(h)||(h=""),n.hasOwnProperty(h)||(n[h]=document.createDocumentFragment(),o.push(h)),n[h].appendChild(p);for(this.settings.lockOptgroupOrder&&o.sort(function(le,R){var G=g.optgroups[le].$order||0,X=g.optgroups[R].$order||0;return G-X}),z=document.createDocumentFragment(),t=0,s=o.length;t<s;t++)h=o[t],g.optgroups.hasOwnProperty(h)&&n[h].childNodes.length?(I=document.createDocumentFragment(),I.appendChild(g.render("optgroup_header",g.optgroups[h])),I.appendChild(n[h]),z.appendChild(g.render("optgroup",c.extend({},g.optgroups[h],{html:Ce(I),dom:I})))):z.appendChild(n[h]);if(ee.html(z),g.settings.highlight&&(ee.removeHighlight(),M.query.length&&M.tokens.length))for(t=0,s=M.tokens.length;t<s;t++)m(ee,M.tokens[t].regex);if(!g.settings.hideSelected)for(t=0,s=g.items.length;t<s;t++)g.getOption(g.items[t]).addClass("selected");V=g.canCreate(te),V&&(ee.prepend(g.render("option_create",{input:te})),Y=c(ee[0].childNodes[0])),g.hasOptions=M.items.length>0||V,g.hasOptions?(M.items.length>0?(H=re&&g.getOption(re),H&&H.length?k=H:g.settings.mode==="single"&&g.items.length&&(k=g.getOption(g.items[0])),(!k||!k.length)&&(Y&&!g.settings.addPrecedence?k=g.getAdjacentOption(Y,1):k=ee.find("[data-selectable]:first"))):k=Y,g.setActiveOption(k),e&&!g.isOpen&&g.open()):(g.setActiveOption(null),e&&g.isOpen&&g.close())},addOption:function(e){var t,r,i,s=this;if(c.isArray(e)){for(t=0,r=e.length;t<r;t++)s.addOption(e[t]);return}(i=s.registerOption(e))&&(s.userOptions[i]=!0,s.lastQuery=null,s.trigger("option_add",i,e))},registerOption:function(e){var t=N(e[this.settings.valueField]);return typeof t>"u"||t===null||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=N(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var r=this,i,s,n,o,v,p,h;if(e=N(e),n=N(t[r.settings.valueField]),e!==null&&r.options.hasOwnProperty(e)){if(typeof n!="string")throw new Error("Value must be set in option data");h=r.options[e].$order,n!==e&&(delete r.options[e],o=r.items.indexOf(e),o!==-1&&r.items.splice(o,1,n)),t.$order=t.$order||h,r.options[n]=t,v=r.renderCache.item,p=r.renderCache.option,v&&(delete v[e],delete v[n]),p&&(delete p[e],delete p[n]),r.items.indexOf(n)!==-1&&(i=r.getItem(e),s=c(r.render("item",t)),i.hasClass("active")&&s.addClass("active"),i.replaceWith(s)),r.lastQuery=null,r.isOpen&&r.refreshOptions(!1)}},removeOption:function(e,t){var r=this;e=N(e);var i=r.renderCache.item,s=r.renderCache.option;i&&delete i[e],s&&delete s[e],delete r.userOptions[e],delete r.options[e],r.lastQuery=null,r.trigger("option_remove",e),r.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={};var t=e.options;c.each(e.options,function(r,i){e.items.indexOf(r)==-1&&delete t[r]}),e.options=e.sifter.items=t,e.lastQuery=null,e.trigger("option_clear")},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,t){var r=this.$dropdown.find("[data-selectable]"),i=r.index(e)+t;return i>=0&&i<r.length?r.eq(i):c()},getElementWithValue:function(e,t){if(e=N(e),typeof e<"u"&&e!==null){for(var r=0,i=t.length;r<i;r++)if(t[r].getAttribute("data-value")===e)return c(t[r])}return c()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(e,t){this.buffer=document.createDocumentFragment();for(var r=this.$control[0].childNodes,i=0;i<r.length;i++)this.buffer.appendChild(r[i]);for(var s=c.isArray(e)?e:[e],i=0,n=s.length;i<n;i++)this.isPending=i<n-1,this.addItem(s[i],t);var o=this.$control[0];o.insertBefore(this.buffer,o.firstChild),this.buffer=null},addItem:function(e,t){var r=t?[]:["change"];ce(this,r,function(){var i,s,n,o=this,v=o.settings.mode,p,h;if(e=N(e),o.items.indexOf(e)!==-1){v==="single"&&o.close();return}o.options.hasOwnProperty(e)&&(v==="single"&&o.clear(t),!(v==="multi"&&o.isFull())&&(i=c(o.render("item",o.options[e])),h=o.isFull(),o.items.splice(o.caretPos,0,e),o.insertAtCaret(i),(!o.isPending||!h&&o.isFull())&&o.refreshState(),o.isSetup&&(n=o.$dropdown_content.find("[data-selectable]"),o.isPending||(s=o.getOption(e),p=o.getAdjacentOption(s,1).attr("data-value"),o.refreshOptions(o.isFocused&&v!=="single"),p&&o.setActiveOption(o.getOption(p))),!n.length||o.isFull()?o.close():o.isPending||o.positionDropdown(),o.updatePlaceholder(),o.trigger("item_add",e,i),o.isPending||o.updateOriginalInput({silent:t}))))})},removeItem:function(e,t){var r=this,i,s,n;i=e instanceof c?e:r.getItem(e),e=N(i.attr("data-value")),s=r.items.indexOf(e),s!==-1&&(i.remove(),i.hasClass("active")&&(n=r.$activeItems.indexOf(i[0]),r.$activeItems.splice(n,1)),r.items.splice(s,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(e)&&r.removeOption(e,t),s<r.caretPos&&r.setCaret(r.caretPos-1),r.refreshState(),r.updatePlaceholder(),r.updateOriginalInput({silent:t}),r.positionDropdown(),r.trigger("item_remove",e,i))},createItem:function(e,t){var r=this,i=r.caretPos;e=e||c.trim(r.$control_input.val()||"");var s=arguments[arguments.length-1];if(typeof s!="function"&&(s=function(){}),typeof t!="boolean"&&(t=!0),!r.canCreate(e))return s(),!1;r.lock();var n=typeof r.settings.create=="function"?this.settings.create:function(p){var h={};return h[r.settings.labelField]=p,h[r.settings.valueField]=p,h},o=ge(function(p){if(r.unlock(),!p||typeof p!="object")return s();var h=N(p[r.settings.valueField]);if(typeof h!="string")return s();r.setTextboxValue(""),r.addOption(p),r.setCaret(i),r.addItem(h),r.refreshOptions(t&&r.settings.mode!=="single"),s(p)}),v=n.apply(this,[e,o]);return typeof v<"u"&&o(v),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var e=this,t=e.isFull(),r=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",r).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!c.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!t&&!r)},isFull:function(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,r,i,s,n=this;if(e=e||{},n.tagType===S){for(i=[],t=0,r=n.items.length;t<r;t++)s=n.options[n.items[t]][n.settings.labelField]||"",i.push('<option value="'+J(n.items[t])+'" selected="selected">'+J(s)+"</option>");!i.length&&!this.$input.attr("multiple")&&i.push('<option value="" selected="selected"></option>'),n.$input.html(i.join(""))}else n.$input.val(n.getValue()),n.$input.attr("value",n.$input.val());n.isSetup&&(e.silent||n.trigger("change",n.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||e.settings.mode==="multi"&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;e.settings.mode==="single"&&e.items.length&&(e.hideInput(),e.isBlurring||e.$control_input.blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t=this.settings.dropdownParent==="body"?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e[0].getBoundingClientRect().width,top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),r=e[0],i=this.buffer||this.$control[0];t===0?i.insertBefore(r,i.firstChild):i.insertBefore(r,i.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(e){var t,r,i,s,n,o,v,p,h,y=this;if(i=e&&e.keyCode===O?-1:1,s=ae(y.$control_input[0]),y.$activeOption&&!y.settings.hideSelected&&(v=y.getAdjacentOption(y.$activeOption,-1).attr("data-value")),n=[],y.$activeItems.length){for(h=y.$control.children(".active:"+(i>0?"last":"first")),o=y.$control.children(":not(input)").index(h),i>0&&o++,t=0,r=y.$activeItems.length;t<r;t++)n.push(c(y.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(y.isFocused||y.settings.mode==="single")&&y.items.length&&(i<0&&s.start===0&&s.length===0?n.push(y.items[y.caretPos-1]):i>0&&s.start===y.$control_input.val().length&&n.push(y.items[y.caretPos]));if(!n.length||typeof y.settings.onDelete=="function"&&y.settings.onDelete.apply(y,[n])===!1)return!1;for(typeof o<"u"&&y.setCaret(o);n.length;)y.removeItem(n.pop());return y.showInput(),y.positionDropdown(),y.refreshOptions(!0),v&&(p=y.getOption(v),p.length&&y.setActiveOption(p)),!0},advanceSelection:function(e,t){var r,i,s,n,o,v,p=this;e!==0&&(p.rtl&&(e*=-1),r=e>0?"last":"first",i=ae(p.$control_input[0]),p.isFocused&&!p.isInputHidden?(n=p.$control_input.val().length,o=e<0?i.start===0&&i.length===0:i.start===n,o&&!n&&p.advanceCaret(e,t)):(v=p.$control.children(".active:"+r),v.length&&(s=p.$control.children(":not(input)").index(v),p.setActiveItem(null),p.setCaret(e>0?s+1:s))))},advanceCaret:function(e,t){var r=this,i,s;e!==0&&(i=e>0?"next":"prev",r.isShiftDown?(s=r.$control_input[i](),s.length&&(r.hideInput(),r.setActiveItem(s),t&&t.preventDefault())):r.setCaret(r.caretPos+e))},setCaret:function(e){var t=this;if(t.settings.mode==="single"?e=t.items.length:e=Math.max(0,Math.min(t.items.length,e)),!t.isPending){var r,i,s,n;for(s=t.$control.children(":not(input)"),r=0,i=s.length;r<i;r++)n=c(s[r]).detach(),r<e?t.$control_input.before(n):t.$control.append(n)}t.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,r=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(r.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:r.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),--K.count==0&&K.$testInput&&(K.$testInput.remove(),K.$testInput=void 0),c(window).off(t),c(document).off(t),c(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var r,i,s="",n=!1,o=this;return(e==="option"||e==="item")&&(r=N(t[o.settings.valueField]),n=!!r),n&&(Q(o.renderCache[e])||(o.renderCache[e]={}),o.renderCache[e].hasOwnProperty(r))?o.renderCache[e][r]:(s=c(o.settings.render[e].apply(this,[t,J])),e==="option"||e==="option_create"?t[o.settings.disabledField]||s.attr("data-selectable",""):e==="optgroup"&&(i=t[o.settings.optgroupValueField]||"",s.attr("data-group",i),t[o.settings.disabledField]&&s.attr("data-disabled","")),(e==="option"||e==="item")&&s.attr("data-value",r||""),n&&(o.renderCache[e][r]=s[0]),s[0])},clearCache:function(e){var t=this;typeof e>"u"?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var r=t.settings.createFilter;return e.length&&(typeof r!="function"||r.apply(t,[e]))&&(typeof r!="string"||new RegExp(r).test(e))&&(!(r instanceof RegExp)||r.test(e))}}),K.count=0,K.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},c.fn.selectize=function(e){var t=c.fn.selectize.defaults,r=c.extend({},t,e),i=r.dataAttr,s=r.labelField,n=r.valueField,o=r.disabledField,v=r.optgroupField,p=r.optgroupLabelField,h=r.optgroupValueField,y=function(I,V){var k,H,Y,g,te=I.attr(i);if(te)for(V.options=JSON.parse(te),k=0,H=V.options.length;k<H;k++)V.items.push(V.options[k][n]);else{var M=c.trim(I.val()||"");if(!r.allowEmptyOption&&!M.length)return;for(Y=M.split(r.delimiter),k=0,H=Y.length;k<H;k++)g={},g[s]=Y[k],g[n]=Y[k],V.options.push(g);V.items=Y}},z=function(I,V){var k,H,Y,g,te=V.options,M={},ee=function(R){var G=i&&R.attr(i);return typeof G=="string"&&G.length?JSON.parse(G):null},re=function(R,G){R=c(R);var X=N(R.val());if(!(!X&&!r.allowEmptyOption)){if(M.hasOwnProperty(X)){if(G){var Z=M[X][v];Z?c.isArray(Z)?Z.push(G):M[X][v]=[Z,G]:M[X][v]=G}return}var W=ee(R)||{};W[s]=W[s]||R.text(),W[n]=W[n]||X,W[o]=W[o]||R.prop("disabled"),W[v]=W[v]||G,M[X]=W,te.push(W),R.is(":selected")&&V.items.push(X)}},le=function(R){var G,X,Z,W,ue;for(R=c(R),Z=R.attr("label"),Z&&(W=ee(R)||{},W[p]=Z,W[h]=Z,W[o]=R.prop("disabled"),V.optgroups.push(W)),ue=c("option",R),G=0,X=ue.length;G<X;G++)re(ue[G],Z)};for(V.maxItems=I.attr("multiple")?null:1,g=I.children(),k=0,H=g.length;k<H;k++)Y=g[k].tagName.toLowerCase(),Y==="optgroup"?le(g[k]):Y==="option"&&re(g[k])};return this.each(function(){if(!this.selectize){var I=c(this),V=this.tagName.toLowerCase(),k=I.attr("placeholder")||I.attr("data-placeholder");!k&&!r.allowEmptyOption&&(k=I.children('option[value=""]').text());var H={placeholder:k,options:[],optgroups:[],items:[]};V==="select"?z(I,H):y(I,H),new K(I,c.extend(!0,{},t,H,e))}})},c.fn.selectize.defaults=K.defaults,c.fn.selectize.support={validity:B},K.define("drag_drop",function(e){if(!c.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if(this.settings.mode==="multi"){var t=this;t.lock=function(){var r=t.lock;return function(){var i=t.$control.data("sortable");return i&&i.disable(),r.apply(t,arguments)}}(),t.unlock=function(){var r=t.unlock;return function(){var i=t.$control.data("sortable");return i&&i.enable(),r.apply(t,arguments)}}(),t.setup=function(){var r=t.setup;return function(){r.apply(this,arguments);var i=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(s,n){n.placeholder.css("width",n.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var s=t.$activeItems?t.$activeItems.slice():null,n=[];i.children("[data-value]").each(function(){n.push(c(this).attr("data-value"))}),t.setValue(n),t.setActiveItem(s)}})}}()}}),K.define("dropdown_header",function(e){var t=this;e=c.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(r){return'<div class="'+r.headerClass+'"><div class="'+r.titleRowClass+'"><span class="'+r.labelClass+'">'+r.title+'</span><a href="javascript:void(0)" class="'+r.closeClass+'">&times;</a></div></div>'}},e),t.setup=function(){var r=t.setup;return function(){r.apply(t,arguments),t.$dropdown_header=c(e.html(e)),t.$dropdown.prepend(t.$dropdown_header)}}()}),K.define("optgroup_columns",function(e){var t=this;e=c.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(s,n){var o=s.closest("[data-group]").find("[data-selectable]"),v=o.index(s)+n;return v>=0&&v<o.length?o.eq(v):c()},this.onKeyDown=function(){var s=t.onKeyDown;return function(n){var o,v,p,h;if(this.isOpen&&(n.keyCode===a||n.keyCode===d)){t.ignoreHover=!0,h=this.$activeOption.closest("[data-group]"),o=h.find("[data-selectable]").index(this.$activeOption),n.keyCode===a?h=h.prev("[data-group]"):h=h.next("[data-group]"),p=h.find("[data-selectable]"),v=p.eq(Math.min(p.length-1,o)),v.length&&this.setActiveOption(v);return}return s.apply(this,arguments)}}();var r=function(){var s,n=r.width,o=document;return typeof n>"u"&&(s=o.createElement("div"),s.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',s=s.firstChild,o.body.appendChild(s),n=r.width=s.offsetWidth-s.clientWidth,o.body.removeChild(s)),n},i=function(){var s,n,o,v,p,h,y;if(y=c("[data-group]",t.$dropdown_content),n=y.length,!(!n||!t.$dropdown_content.width())){if(e.equalizeHeight){for(o=0,s=0;s<n;s++)o=Math.max(o,y.eq(s).height());y.css({height:o})}e.equalizeWidth&&(h=t.$dropdown_content.innerWidth()-r(),v=Math.round(h/n),y.css({width:v}),n>1&&(p=h-v*(n-1),y.eq(n-1).css({width:p})))}};(e.equalizeHeight||e.equalizeWidth)&&(ne.after(this,"positionDropdown",i),ne.after(this,"refreshOptions",i))}),K.define("remove_button",function(e){e=c.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);var t=function(i,s){s.className="remove-single";var n=i,o='<a href="javascript:void(0)" class="'+s.className+'" tabindex="-1" title="'+J(s.title)+'">'+s.label+"</a>",v=function(p,h){return c("<span>").append(p).append(h)};i.setup=function(){var p=n.setup;return function(){if(s.append){var h=c(n.$input.context).attr("id");c("#"+h);var y=n.settings.render.item;n.settings.render.item=function(z){return v(y.apply(i,arguments),o)}}p.apply(i,arguments),i.$control.on("click","."+s.className,function(z){z.preventDefault(),!n.isLocked&&n.clear()})}}()},r=function(i,s){var n=i,o='<a href="javascript:void(0)" class="'+s.className+'" tabindex="-1" title="'+J(s.title)+'">'+s.label+"</a>",v=function(p,h){var y=p.search(/(<\/[^>]+>\s*)$/);return p.substring(0,y)+h+p.substring(y)};i.setup=function(){var p=n.setup;return function(){if(s.append){var h=n.settings.render.item;n.settings.render.item=function(y){return v(h.apply(i,arguments),o)}}p.apply(i,arguments),i.$control.on("click","."+s.className,function(y){if(y.preventDefault(),!n.isLocked){var z=c(y.currentTarget).parent();n.setActiveItem(z),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()};if(this.settings.mode==="single"){t(this,e);return}else r(this,e)}),K.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(r){return r[this.settings.labelField]},this.onKeyDown=function(){var r=t.onKeyDown;return function(i){var s,n;if(i.keyCode===O&&this.$control_input.val()===""&&!this.$activeItems.length&&(s=this.caretPos-1,s>=0&&s<this.items.length)){n=this.options[this.items[s]],this.deleteSelection(i)&&(this.setTextboxValue(e.text.apply(this,[n])),this.refreshOptions(!0)),i.preventDefault();return}return r.apply(this,arguments)}}()}),K})})(xe);
