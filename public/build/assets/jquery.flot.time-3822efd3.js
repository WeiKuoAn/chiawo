(function(p){var H={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function S(r,l){return l*Math.floor(r/l)}function b(r,l,c,M){if(typeof r.strftime=="function")return r.strftime(l);var s=function(f,a){return f=""+f,a=""+(a??"0"),f.length==1?a+f:f},i=[],m=!1,o=r.getHours(),e=o<12;c==null&&(c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),M==null&&(M=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var h;o>12?h=o-12:o==0?h=12:h=o;for(var u=0;u<l.length;++u){var t=l.charAt(u);if(m){switch(t){case"a":t=""+M[r.getDay()];break;case"b":t=""+c[r.getMonth()];break;case"d":t=s(r.getDate());break;case"e":t=s(r.getDate()," ");break;case"h":case"H":t=s(o);break;case"I":t=s(h);break;case"l":t=s(h," ");break;case"m":t=s(r.getMonth()+1);break;case"M":t=s(r.getMinutes());break;case"q":t=""+(Math.floor(r.getMonth()/3)+1);break;case"S":t=s(r.getSeconds());break;case"y":t=s(r.getFullYear()%100);break;case"Y":t=""+r.getFullYear();break;case"p":t=e?"am":"pm";break;case"P":t=e?"AM":"PM";break;case"w":t=""+r.getDay();break}i.push(t),m=!1}else t=="%"?m=!0:i.push(t)}return i.join("")}function d(r){function l(i,m,o,e){i[m]=function(){return o[e].apply(o,arguments)}}var c={date:r};r.strftime!=null&&l(c,"strftime",r,"strftime"),l(c,"getTime",r,"getTime"),l(c,"setTime",r,"setTime");for(var M=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],s=0;s<M.length;s++)l(c,"get"+M[s],r,"getUTC"+M[s]),l(c,"set"+M[s],r,"setUTC"+M[s]);return c}function T(r,l){if(l.timezone=="browser")return new Date(r);if(!l.timezone||l.timezone=="utc")return d(new Date(r));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var c=new timezoneJS.Date;return c.setTimezone(l.timezone),c.setTime(r),c}else return d(new Date(r))}var n={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},q=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],Y=q.concat([[3,"month"],[6,"month"],[1,"year"]]),F=q.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function N(r){r.hooks.processOptions.push(function(l,c){p.each(l.getAxes(),function(M,s){var i=s.options;i.mode=="time"&&(s.tickGenerator=function(m){var o=[],e=T(m.min,i),h=0,u=i.tickSize&&i.tickSize[1]==="quarter"||i.minTickSize&&i.minTickSize[1]==="quarter"?F:Y;i.minTickSize!=null&&(typeof i.tickSize=="number"?h=i.tickSize:h=i.minTickSize[0]*n[i.minTickSize[1]]);for(var t=0;t<u.length-1&&!(m.delta<(u[t][0]*n[u[t][1]]+u[t+1][0]*n[u[t+1][1]])/2&&u[t][0]*n[u[t][1]]>=h);++t);var f=u[t][0],a=u[t][1];if(a=="year"){if(i.minTickSize!=null&&i.minTickSize[1]=="year")f=Math.floor(i.minTickSize[0]);else{var v=Math.pow(10,Math.floor(Math.log(m.delta/n.year)/Math.LN10)),z=m.delta/n.year/v;z<1.5?f=1:z<3?f=2:z<7.5?f=5:f=10,f*=v}f<1&&(f=1)}m.tickSize=i.tickSize||[f,a];var k=m.tickSize[0];a=m.tickSize[1];var g=k*n[a];a=="second"?e.setSeconds(S(e.getSeconds(),k)):a=="minute"?e.setMinutes(S(e.getMinutes(),k)):a=="hour"?e.setHours(S(e.getHours(),k)):a=="month"?e.setMonth(S(e.getMonth(),k)):a=="quarter"?e.setMonth(3*S(e.getMonth()/3,k)):a=="year"&&e.setFullYear(S(e.getFullYear(),k)),e.setMilliseconds(0),g>=n.minute&&e.setSeconds(0),g>=n.hour&&e.setMinutes(0),g>=n.day&&e.setHours(0),g>=n.day*4&&e.setDate(1),g>=n.month*2&&e.setMonth(S(e.getMonth(),3)),g>=n.quarter*2&&e.setMonth(S(e.getMonth(),6)),g>=n.year&&e.setMonth(0);var D=0,y=Number.NaN,w;do if(w=y,y=e.getTime(),o.push(y),a=="month"||a=="quarter")if(k<1){e.setDate(1);var A=e.getTime();e.setMonth(e.getMonth()+(a=="quarter"?3:1));var C=e.getTime();e.setTime(y+D*n.hour+(C-A)*k),D=e.getHours(),e.setHours(0)}else e.setMonth(e.getMonth()+k*(a=="quarter"?3:1));else a=="year"?e.setFullYear(e.getFullYear()+k):e.setTime(y+g);while(y<m.max&&y!=w);return o},s.tickFormatter=function(m,o){var e=T(m,o.options);if(i.timeformat!=null)return b(e,i.timeformat,i.monthNames,i.dayNames);var h=o.options.tickSize&&o.options.tickSize[1]=="quarter"||o.options.minTickSize&&o.options.minTickSize[1]=="quarter",u=o.tickSize[0]*n[o.tickSize[1]],t=o.max-o.min,f=i.twelveHourClock?" %p":"",a=i.twelveHourClock?"%I":"%H",v;u<n.minute?v=a+":%M:%S"+f:u<n.day?t<2*n.day?v=a+":%M"+f:v="%b %d "+a+":%M"+f:u<n.month?v="%b %d":h&&u<n.quarter||!h&&u<n.year?t<n.year?v="%b":v="%b %Y":h&&u<n.year?t<n.year?v="Q%q":v="Q%q %Y":v="%Y";var z=b(e,v,i.monthNames,i.dayNames);return z})})})}p.plot.plugins.push({init:N,options:H,name:"time",version:"1.0"}),p.plot.formatDate=b,p.plot.dateGenerator=T})(jQuery);
