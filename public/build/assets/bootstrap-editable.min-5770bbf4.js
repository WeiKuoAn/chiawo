/*! X-editable - v1.5.1 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */(function(e){var n=function(t,i){this.options=e.extend({},e.fn.editableform.defaults,i),this.$div=e(t),this.options.scope||(this.options.scope=this)};n.prototype={constructor:n,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=e(e.fn.editableform.template)},initButtons:function(){var t=this.$form.find(".editable-buttons");t.append(e.fn.editableform.buttons),this.options.showbuttons==="bottom"&&t.addClass("editable-buttons-bottom")},render:function(){this.$loading=e(e.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),e.when(this.input.render()).then(e.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(e.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(i){i.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var t=this.value===null||this.value===void 0||this.value===""?this.options.defaultValue:this.value;this.input.value2input(t),this.$form.submit(e.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,i;this.$form?(t=this.$form.outerWidth(),i=this.$form.outerHeight(),t&&this.$loading.width(t),i&&this.$loading.height(i),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(t){var i,s=this.$form.find(".control-group"),o=this.$form.find(".editable-error-block");if(t===!1)s.removeClass(e.fn.editableform.errorGroupClass),o.removeClass(e.fn.editableform.errorBlockClass).empty().hide();else{if(t){i=(""+t).split(`
`);for(var h=0;h<i.length;h++)i[h]=e("<div>").text(i[h]).html();t=i.join("<br>")}s.addClass(e.fn.editableform.errorGroupClass),o.addClass(e.fn.editableform.errorBlockClass).html(t).show()}},submit:function(t){t.stopPropagation(),t.preventDefault();var i=this.input.input2value(),s=this.validate(i);if(e.type(s)==="object"&&s.newValue!==void 0){if(i=s.newValue,this.input.value2input(i),typeof s.msg=="string")return this.error(s.msg),this.showForm(),void 0}else if(s)return this.error(s),this.showForm(),void 0;if(!this.options.savenochange&&this.input.value2str(i)==this.input.value2str(this.value))return this.$div.triggerHandler("nochange"),void 0;var o=this.input.value2submit(i);this.isSaving=!0,e.when(this.save(o)).done(e.proxy(function(h){this.isSaving=!1;var u=typeof this.options.success=="function"?this.options.success.call(this.options.scope,h,i):null;return u===!1?(this.error(!1),this.showForm(!1),void 0):typeof u=="string"?(this.error(u),this.showForm(),void 0):(u&&typeof u=="object"&&u.hasOwnProperty("newValue")&&(i=u.newValue),this.error(!1),this.value=i,this.$div.triggerHandler("save",{newValue:i,submitValue:o,response:h}),void 0)},this)).fail(e.proxy(function(h){this.isSaving=!1;var u;u=typeof this.options.error=="function"?this.options.error.call(this.options.scope,h,i):typeof h=="string"?h:h.responseText||h.statusText||"Unknown error!",this.error(u),this.showForm()},this))},save:function(t){this.options.pk=e.fn.editableutils.tryParseJson(this.options.pk,!0);var i,s=typeof this.options.pk=="function"?this.options.pk.call(this.options.scope):this.options.pk,o=!!(typeof this.options.url=="function"||this.options.url&&(this.options.send==="always"||this.options.send==="auto"&&s!==null&&s!==void 0));return o?(this.showLoading(),i={name:this.options.name||"",value:t,pk:s},typeof this.options.params=="function"?i=this.options.params.call(this.options.scope,i):(this.options.params=e.fn.editableutils.tryParseJson(this.options.params,!0),e.extend(i,this.options.params)),typeof this.options.url=="function"?this.options.url.call(this.options.scope,i):e.ajax(e.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(t){return t===void 0&&(t=this.value),typeof this.options.validate=="function"?this.options.validate.call(this.options.scope,t):void 0},option:function(t,i){t in this.options&&(this.options[t]=i),t==="value"&&this.setValue(i)},setValue:function(t,i){this.value=i?this.input.str2value(t):t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},e.fn.editableform=function(t){var i=arguments;return this.each(function(){var s=e(this),o=s.data("editableform"),h=typeof t=="object"&&t;o||s.data("editableform",o=new n(this,h)),typeof t=="string"&&o[t].apply(o,Array.prototype.slice.call(i,1))})},e.fn.editableform.Constructor=n,e.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},e.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',e.fn.editableform.loading='<div class="editableform-loading"></div>',e.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',e.fn.editableform.errorGroupClass=null,e.fn.editableform.errorBlockClass="editable-error",e.fn.editableform.engine="jquery"})(window.jQuery),function(e){e.fn.editableutils={inherit:function(n,t){var i=function(){};i.prototype=t.prototype,n.prototype=new i,n.prototype.constructor=n,n.superclass=t.prototype},setCursorPosition:function(n,t){if(n.setSelectionRange)n.setSelectionRange(t,t);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}},tryParseJson:function(n,t){if(typeof n=="string"&&n.length&&n.match(/^[\{\[].*[\}\]]$/))if(t)try{n=new Function("return "+n)()}catch{}finally{return n}else n=new Function("return "+n)();return n},sliceObj:function(n,t,i){var s,o,h={};if(!e.isArray(t)||!t.length)return h;for(var u=0;u<t.length;u++)s=t[u],n.hasOwnProperty(s)&&(h[s]=n[s]),i!==!0&&(o=s.toLowerCase(),n.hasOwnProperty(o)&&(h[s]=n[o]));return h},getConfigData:function(n){var t={};return e.each(n.data(),function(i,s){(typeof s!="object"||s&&typeof s=="object"&&(s.constructor===Object||s.constructor===Array))&&(t[i]=s)}),t},objectKeys:function(n){if(Object.keys)return Object.keys(n);if(n!==Object(n))throw new TypeError("Object.keys called on a non-object");var t,i=[];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&i.push(t);return i},escape:function(n){return e("<div>").text(n).html()},itemsByValue:function(n,t,i){if(!t||n===null)return[];if(typeof i!="function"){var s=i||"value";i=function(d){return d[s]}}var o=e.isArray(n),h=[],u=this;return e.each(t,function(d,v){if(v.children)h=h.concat(u.itemsByValue(n,v.children,i));else if(o)e.grep(n,function(g){return g==(v&&typeof v=="object"?i(v):v)}).length&&h.push(v);else{var f=v&&typeof v=="object"?i(v):v;n==f&&h.push(v)}}),h},createInput:function(n){var t,i,s=n.type;return s==="date"&&(n.mode==="inline"?e.fn.editabletypes.datefield?s="datefield":e.fn.editabletypes.dateuifield&&(s="dateuifield"):e.fn.editabletypes.date?s="date":e.fn.editabletypes.dateui&&(s="dateui"),s!=="date"||e.fn.editabletypes.date||(s="combodate")),s==="datetime"&&n.mode==="inline"&&(s="datetimefield"),s!=="wysihtml5"||e.fn.editabletypes[s]||(s="textarea"),typeof e.fn.editabletypes[s]=="function"?(t=e.fn.editabletypes[s],i=this.sliceObj(n,this.objectKeys(t.defaults)),new t(i)):(e.error("Unknown type: "+s),!1)},supportsTransitions:function(){var n=document.body||document.documentElement,t=n.style,i="transition",s=["Moz","Webkit","Khtml","O","ms"];if(typeof t[i]=="string")return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var o=0;o<s.length;o++)if(typeof t[s[o]+i]=="string")return!0;return!1}}}(window.jQuery),function(e){var n=function(i,s){this.init(i,s)},t=function(i,s){this.init(i,s)};n.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,s){this.$element=e(i),this.options=e.extend({},e.fn.editableContainer.defaults,s),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",e.proxy(function(){this.destroy()},this)),e(document).data("editable-handlers-attached")||(e(document).on("keyup.editable",function(o){o.which===27&&e(".editable-open").editableContainer("hide")}),e(document).on("click.editable",function(o){var h,u=e(o.target),d=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(e.contains(document.documentElement,o.target)&&!u.is(document)){for(h=0;h<d.length;h++)if(u.is(d[h])||u.parents(d[h]).length)return;n.prototype.closeOthers(o.target)}}),e(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!e.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var i in this.options)i in this.defaults?this.containerOptions[i]=this.options[i]:this.formOptions[i]=this.options[i]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var i;return this.containerDataName&&(i=this.$element.data(this.containerDataName))?i:i=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:e.proxy(this.save,this),nochange:e.proxy(function(){this.hide("nochange")},this),cancel:e.proxy(function(){this.hide("cancel")},this),show:e.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:e.proxy(this.setPosition,this),resize:e.proxy(this.setPosition,this),rendered:e.proxy(function(){this.$element.triggerHandler("shown",e(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(i){this.$element.addClass("editable-open"),i!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=e("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(i){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return this.delayedHide={reason:i},void 0;this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",i||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(i){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(i)},setPosition:function(){},save:function(i,s){this.$element.triggerHandler("save",s),this.hide("save")},option:function(i,s){this.options[i]=s,i in this.containerOptions?(this.containerOptions[i]=s,this.setContainerOption(i,s)):(this.formOptions[i]=s,this.$form&&this.$form.editableform("option",i,s))},setContainerOption:function(i,s){this.call("option",i,s)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(i){e(".editable-open").each(function(s,o){if(o!==i&&!e(o).find(i).length){var h=e(o),u=h.data("editableContainer");u&&(u.options.onblur==="cancel"?h.data("editableContainer").hide("onblur"):u.options.onblur==="submit"&&h.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},e.fn.editableContainer=function(i){var s=arguments;return this.each(function(){var o=e(this),h="editableContainer",u=o.data(h),d=typeof i=="object"&&i,v=d.mode==="inline"?t:n;u||o.data(h,u=new v(this,d)),typeof i=="string"&&u[i].apply(u,Array.prototype.slice.call(s,1))})},e.fn.editableContainer.Popup=n,e.fn.editableContainer.Inline=t,e.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(i){i.handler&&i.handler()}}}(window.jQuery),function(e){e.extend(e.fn.editableContainer.Inline.prototype,e.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=e("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,e.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(e){var n=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.editable.defaults,i,e.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!e.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};n.prototype={constructor:n,init:function(){var t,i=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=e.fn.editableutils.createInput(this.options),this.input){switch(this.options.value===void 0||this.options.value===null?(this.value=this.input.html2value(e.trim(this.$element.html())),i=!0):(this.options.value=e.fn.editableutils.tryParseJson(this.options.value,!0),this.value=typeof this.options.value=="string"?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),this.input.type==="textarea"&&this.$element.addClass("editable-pre-wrapped"),this.options.toggle!=="manual"?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",e.proxy(function(s){if(this.options.disabled||s.preventDefault(),this.options.toggle==="mouseenter")this.show();else{var o=this.options.toggle!=="click";this.toggle(o)}},this))):this.$element.attr("tabindex",-1),typeof this.options.display=="function"&&(this.options.autotext="always"),this.options.autotext){case"always":t=!0;break;case"auto":t=!e.trim(this.$element.text()).length&&this.value!==null&&this.value!==void 0&&!i;break;default:t=!1}e.when(t?this.render():!0).then(e.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var t=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",t,e.proxy(function(i){var s=e(i.target);s.data("editable")||(s.hasClass(this.options.emptyclass)&&s.empty(),s.editable(this.options).trigger(i))},this))},render:function(t){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):typeof this.options.display=="function"?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.options.toggle!=="manual"&&this.$element.attr("tabindex")==="-1"&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(t,i){return t&&typeof t=="object"?(e.each(t,e.proxy(function(s,o){this.option(e.trim(s),o)},this)),void 0):(this.options[t]=i,t==="disabled"?i?this.disable():this.enable():(t==="value"&&this.setValue(i),this.container&&this.container.option(t,i),this.input.option&&this.input.option(t,i),void 0))},handleEmpty:function(t){this.options.display!==!1&&(this.isEmpty=t!==void 0?t:typeof this.input.isEmpty=="function"?this.input.isEmpty(this.$element):e.trim(this.$element.html())==="",this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(t){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=e.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i),this.$element.on("save.internal",e.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(t)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,i){if(this.options.unsavedclass){var s=!1;s=s||typeof this.options.url=="function",s=s||this.options.display===!1,s=s||i.response!==void 0,s=s||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(i.newValue),s?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var o=this.$element,h=o.css("background-color");o.css("background-color",this.options.highlight),setTimeout(function(){h==="transparent"&&(h=""),o.css("background-color",h),o.addClass("editable-bg-transition"),setTimeout(function(){o.removeClass("editable-bg-transition")},1700)},10)}this.setValue(i.newValue,!1,i.response)},validate:function(){return typeof this.options.validate=="function"?this.options.validate.call(this,this.value):void 0},setValue:function(t,i,s){this.value=i?this.input.str2value(t):t,this.container&&this.container.option("value",this.value),e.when(this.render(s)).then(e.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),this.options.toggle!=="manual"&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},e.fn.editable=function(t){var i={},s=arguments,o="editable";switch(t){case"validate":return this.each(function(){var a,l=e(this),p=l.data(o);p&&(a=p.validate())&&(i[p.options.name]=a)}),i;case"getValue":return arguments.length===2&&arguments[1]===!0?i=this.eq(0).data(o).value:this.each(function(){var a=e(this),l=a.data(o);l&&l.value!==void 0&&l.value!==null&&(i[l.options.name]=l.input.value2submit(l.value))}),i;case"submit":var h=arguments[1]||{},u=this,d=this.editable("validate");if(e.isEmptyObject(d)){var v={};if(u.length===1){var f=u.data("editable"),g={name:f.options.name||"",value:f.input.value2submit(f.value),pk:typeof f.options.pk=="function"?f.options.pk.call(f.options.scope):f.options.pk};typeof f.options.params=="function"?g=f.options.params.call(f.options.scope,g):(f.options.params=e.fn.editableutils.tryParseJson(f.options.params,!0),e.extend(g,f.options.params)),v={url:f.options.url,data:g,type:"POST"},h.success=h.success||f.options.success,h.error=h.error||f.options.error}else{var r=this.editable("getValue");v={url:h.url,data:r,type:"POST"}}v.success=typeof h.success=="function"?function(a){h.success.call(u,a,h)}:e.noop,v.error=typeof h.error=="function"?function(){h.error.apply(u,arguments)}:e.noop,h.ajaxOptions&&e.extend(v,h.ajaxOptions),h.data&&e.extend(v.data,h.data),e.ajax(v)}else typeof h.error=="function"&&h.error.call(u,d);return this}return this.each(function(){var a=e(this),l=a.data(o),p=typeof t=="object"&&t;return p&&p.selector?(l=new n(this,p),void 0):(l||a.data(o,l=new n(this,p)),typeof t=="string"&&l[t].apply(l,Array.prototype.slice.call(s,1)),void 0)})},e.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(e){e.fn.editabletypes={};var n=function(){};n.prototype={init:function(t,i,s){this.type=t,this.options=e.extend({},s,i)},prerender:function(){this.$tpl=e(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(t,i){e(i)[this.options.escape?"text":"html"](e.trim(t))},html2value:function(t){return e("<div>").html(t).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(t){return e("<div>").text(t).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){this.options[t]!==void 0&&this.options[t]!==null&&this.$input.attr(t,this.options[t])},option:function(t,i){this.options[t]=i}},n.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},e.extend(e.fn.editabletypes,{abstractinput:n})}(window.jQuery),function(e){var n=function(){};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){var t=e.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),t.resolve()},function(){this.error=this.options.sourceError,t.resolve()}),t.promise()},html2value:function(){return null},value2html:function(t,i,s,o){var h=e.Deferred(),u=function(){typeof s=="function"?s.call(i,t,this.sourceData,o):this.value2htmlFinal(t,i),h.resolve()};return t===null?u.call(this):this.onSourceReady(u,function(){h.resolve()}),h.promise()},onSourceReady:function(t,i){var s;if(e.isFunction(this.options.source)?(s=this.options.source.call(this.options.scope),this.sourceData=null):s=this.options.source,this.options.sourceCache&&e.isArray(this.sourceData))return t.call(this),void 0;try{s=e.fn.editableutils.tryParseJson(s,!1)}catch{return i.call(this),void 0}if(typeof s=="string"){if(this.options.sourceCache){var o,h=s;if(e(document).data(h)||e(document).data(h,{}),o=e(document).data(h),o.loading===!1&&o.sourceData)return this.sourceData=o.sourceData,this.doPrepend(),t.call(this),void 0;if(o.loading===!0)return o.callbacks.push(e.proxy(function(){this.sourceData=o.sourceData,this.doPrepend(),t.call(this)},this)),o.err_callbacks.push(e.proxy(i,this)),void 0;o.loading=!0,o.callbacks=[],o.err_callbacks=[]}var u=e.extend({url:s,type:"get",cache:!1,dataType:"json",success:e.proxy(function(d){o&&(o.loading=!1),this.sourceData=this.makeArray(d),e.isArray(this.sourceData)?(o&&(o.sourceData=this.sourceData,e.each(o.callbacks,function(){this.call()})),this.doPrepend(),t.call(this)):(i.call(this),o&&e.each(o.err_callbacks,function(){this.call()}))},this),error:e.proxy(function(){i.call(this),o&&(o.loading=!1,e.each(o.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);e.ajax(u)}else this.sourceData=this.makeArray(s),e.isArray(this.sourceData)?(this.doPrepend(),t.call(this)):i.call(this)},doPrepend:function(){this.options.prepend!==null&&this.options.prepend!==void 0&&(e.isArray(this.prependData)||(e.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=e.fn.editableutils.tryParseJson(this.options.prepend,!0),typeof this.options.prepend=="string"&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),e.isArray(this.prependData)&&e.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(t){var i,s,o,h,u=[];if(!t||typeof t=="string")return null;if(e.isArray(t)){h=function(v,f){return s={value:v,text:f},i++>=2?!1:void 0};for(var d=0;d<t.length;d++)o=t[d],typeof o=="object"?(i=0,e.each(o,h),i===1?u.push(s):i>1&&(o.children&&(o.children=this.makeArray(o.children)),u.push(o))):u.push({value:o,text:o})}else e.each(t,function(v,f){u.push({value:v,text:f})});return u},option:function(t,i){this.options[t]=i,t==="source"&&(this.sourceData=null),t==="prepend"&&(this.prependData=null)}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),e.fn.editabletypes.list=n}(window.jQuery),function(e){var n=function(t){this.init("text",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),e.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=e('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(e.proxy(function(t){if(!~e.inArray(t.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(t)},100)}},this)).parent().css("position","relative"),this.$clear.click(e.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var t=this.$input.val().length,i=this.$clear.is(":visible");t&&!i&&this.$clear.show(),!t&&i&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),e.fn.editabletypes.text=n}(window.jQuery),function(e){var n=function(t){this.init("textarea",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(t){t.ctrlKey&&t.which===13&&e(this).closest("form").submit()})},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),e.fn.editabletypes.textarea=n}(window.jQuery),function(e){var n=function(t){this.init("select",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.list),e.extend(n.prototype,{renderList:function(){this.$input.empty();var t=function(i,s){var o;if(e.isArray(s))for(var h=0;h<s.length;h++)o={},s[h].children?(o.label=s[h].text,i.append(t(e("<optgroup>",o),s[h].children))):(o.value=s[h].value,s[h].disabled&&(o.disabled=!0),i.append(e("<option>",o).text(s[h].text)));return i};t(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(i){i.which===13&&e(this).closest("form").submit()})},value2htmlFinal:function(t,i){var s="",o=e.fn.editableutils.itemsByValue(t,this.sourceData);o.length&&(s=o[0].text),e.fn.editabletypes.abstractinput.prototype.value2html.call(this,s,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){e(this).closest("form").submit()})}}),n.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),e.fn.editabletypes.select=n}(window.jQuery),function(e){var n=function(t){this.init("checklist",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.list),e.extend(n.prototype,{renderList:function(){var t;if(this.$tpl.empty(),e.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++)t=e("<label>").append(e("<input>",{type:"checkbox",value:this.sourceData[i].value})).append(e("<span>").text(" "+this.sourceData[i].text)),e("<div>").append(t).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(t){return e.isArray(t)?t.sort().join(e.trim(this.options.separator)):""},str2value:function(t){var i,s=null;return typeof t=="string"&&t.length?(i=new RegExp("\\s*"+e.trim(this.options.separator)+"\\s*"),s=t.split(i)):s=e.isArray(t)?t:[t],s},value2input:function(t){this.$input.prop("checked",!1),e.isArray(t)&&t.length&&this.$input.each(function(i,s){var o=e(s);e.each(t,function(h,u){o.val()==u&&o.prop("checked",!0)})})},input2value:function(){var t=[];return this.$input.filter(":checked").each(function(i,s){t.push(e(s).val())}),t},value2htmlFinal:function(t,i){var s=[],o=e.fn.editableutils.itemsByValue(t,this.sourceData),h=this.options.escape;o.length?(e.each(o,function(u,d){var v=h?e.fn.editableutils.escape(d.text):d.text;s.push(v)}),e(i).html(s.join("<br>"))):e(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(t){t.which===13&&e(this).closest("form").submit()})}}),n.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),e.fn.editabletypes.checklist=n}(window.jQuery),function(e){var n=function(t){this.init("password",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),e.extend(n.prototype,{value2html:function(t,i){t?e(i).text("[hidden]"):e(i).empty()},html2value:function(){return null}}),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),e.fn.editabletypes.password=n}(window.jQuery),function(e){var n=function(t){this.init("email",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),e.fn.editabletypes.email=n}(window.jQuery),function(e){var n=function(t){this.init("url",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),e.fn.editabletypes.url=n}(window.jQuery),function(e){var n=function(t){this.init("tel",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),e.fn.editabletypes.tel=n}(window.jQuery),function(e){var n=function(t){this.init("number",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),e.extend(n.prototype,{render:function(){n.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),e.fn.editabletypes.number=n}(window.jQuery),function(e){var n=function(t){this.init("range",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.number),e.extend(n.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){e(this).siblings("output").text(e(this).val())})},activate:function(){this.$input.focus()}}),n.defaults=e.extend({},e.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),e.fn.editabletypes.range=n}(window.jQuery),function(e){var n=function(t){this.init("time",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.setClass()}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),e.fn.editabletypes.time=n}(window.jQuery),function(e){var n=function(t){if(this.init("select2",t,n.defaults),t.select2=t.select2||{},this.sourceData=null,t.placeholder&&(t.select2.placeholder=t.placeholder),!t.select2.tags&&t.source){var i=t.source;e.isFunction(t.source)&&(i=t.source.call(t.scope)),typeof i=="string"?(t.select2.ajax=t.select2.ajax||{},t.select2.ajax.data||(t.select2.ajax.data=function(o){return{query:o}}),t.select2.ajax.results||(t.select2.ajax.results=function(o){return{results:o}}),t.select2.ajax.url=i):(this.sourceData=this.convertSource(i),t.select2.data=this.sourceData)}if(this.options.select2=e.extend({},n.defaults.select2,t.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,typeof this.idFunc!="function"){var s=this.idFunc||"id";this.idFunc=function(o){return o[s]}}this.formatSelection=this.options.select2.formatSelection,typeof this.formatSelection!="function"&&(this.formatSelection=function(o){return o.text})};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",e.proxy(function(t){this.sourceData=t.items.results},this)),this.isMultiple&&this.$input.on("change",function(){e(this).closest("form").parent().triggerHandler("resize")})},value2html:function(t,i){var s,o="",h=this;this.options.select2.tags?s=t:this.sourceData&&(s=e.fn.editableutils.itemsByValue(t,this.sourceData,this.idFunc)),e.isArray(s)?(o=[],e.each(s,function(u,d){o.push(d&&typeof d=="object"?h.formatSelection(d):d)})):s&&(o=h.formatSelection(s)),o=e.isArray(o)?o.join(this.options.viewseparator):o,n.superclass.value2html.call(this,o,i)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(t){if(e.isArray(t)&&(t=t.join(this.getSeparator())),this.$input.data("select2")?this.$input.val(t).trigger("change",!0):(this.$input.val(t),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,s=this.options.select2.formatSelection;if(!i&&!s){var o=e(this.options.scope);if(!o.data("editable").isEmpty){var h={id:t,text:o.text()};this.$input.select2("data",h)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(t,i){if(typeof t!="string"||!this.isMultiple)return t;i=i||this.getSeparator();var s,o,h;if(t===null||t.length<1)return null;for(s=t.split(i),o=0,h=s.length;h>o;o+=1)s[o]=e.trim(s[o]);return s},autosubmit:function(){this.$input.on("change",function(t,i){i||e(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||e.fn.select2.defaults.separator},convertSource:function(t){if(e.isArray(t)&&t.length&&t[0].value!==void 0)for(var i=0;i<t.length;i++)t[i].value!==void 0&&(t[i].id=t[i].value,delete t[i].value);return t},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),e.fn.editabletypes.select2=n}(window.jQuery),function(e){var n=function(t,i){return this.$element=e(t),this.$element.is("input")?(this.options=e.extend({},e.fn.combodate.defaults,i,this.$element.data()),this.init(),void 0):(e.error("Combodate should be applied to INPUT element"),void 0)};n.prototype={constructor:n,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=e('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",e.proxy(function(t){this.$element.val(this.getValue()).change(),this.options.smartDays&&(e(t.target).is(".month")||e(t.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template;return e.each(this.map,function(i,s){s=s[0];var o=new RegExp(s+"+"),h=s.length>1?s.substring(1,2):s;t=t.replace(o,"{"+h+"}")}),t=t.replace(/ /g,"&nbsp;"),e.each(this.map,function(i,s){s=s[0];var o=s.length>1?s.substring(1,2):s;t=t.replace("{"+o+"}",'<select class="'+i+'"></select>')}),t},initCombos:function(){for(var t in this.map){var i=this.$widget.find("."+t);this["$"+t]=i.length?i:null,this.fillCombo(t)}},fillCombo:function(t){var i=this["$"+t];if(i){var s="fill"+t.charAt(0).toUpperCase()+t.slice(1),o=this[s](),h=i.val();i.empty();for(var u=0;u<o.length;u++)i.append('<option value="'+o[u][0]+'">'+o[u][1]+"</option>");i.val(h)}},fillCommon:function(t){var i,s=[];if(this.options.firstItem==="name"){i=moment.relativeTime||moment.langData()._relativeTime;var o=typeof i[t]=="function"?i[t](1,!0,t,!1):i[t];o=o.split(" ").reverse()[0],s.push(["",o])}else this.options.firstItem==="empty"&&s.push(["",""]);return s},fillDay:function(){var t,i,s=this.fillCommon("d"),o=this.options.template.indexOf("DD")!==-1,h=31;if(this.options.smartDays&&this.$month&&this.$year){var u=parseInt(this.$month.val(),10),d=parseInt(this.$year.val(),10);isNaN(u)||isNaN(d)||(h=moment([d,u]).daysInMonth())}for(i=1;h>=i;i++)t=o?this.leadZero(i):i,s.push([i,t]);return s},fillMonth:function(){var t,i,s=this.fillCommon("M"),o=this.options.template.indexOf("MMMM")!==-1,h=this.options.template.indexOf("MMM")!==-1,u=this.options.template.indexOf("MM")!==-1;for(i=0;11>=i;i++)t=o?moment().date(1).month(i).format("MMMM"):h?moment().date(1).month(i).format("MMM"):u?this.leadZero(i+1):i+1,s.push([i,t]);return s},fillYear:function(){var t,i,s=[],o=this.options.template.indexOf("YYYY")!==-1;for(i=this.options.maxYear;i>=this.options.minYear;i--)t=o?i:(i+"").substring(2),s[this.options.yearDescending?"push":"unshift"]([i,t]);return s=this.fillCommon("y").concat(s)},fillHour:function(){var t,i,s=this.fillCommon("h"),o=this.options.template.indexOf("h")!==-1,h=(this.options.template.indexOf("H"),this.options.template.toLowerCase().indexOf("hh")!==-1),u=o?1:0,d=o?12:23;for(i=u;d>=i;i++)t=h?this.leadZero(i):i,s.push([i,t]);return s},fillMinute:function(){var t,i,s=this.fillCommon("m"),o=this.options.template.indexOf("mm")!==-1;for(i=0;59>=i;i+=this.options.minuteStep)t=o?this.leadZero(i):i,s.push([i,t]);return s},fillSecond:function(){var t,i,s=this.fillCommon("s"),o=this.options.template.indexOf("ss")!==-1;for(i=0;59>=i;i+=this.options.secondStep)t=o?this.leadZero(i):i,s.push([i,t]);return s},fillAmpm:function(){var t=this.options.template.indexOf("a")!==-1,i=(this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return i},getValue:function(t){var i,s={},o=this,h=!1;return e.each(this.map,function(u){if(u!=="ampm"){var d=u==="day"?1:0;return s[u]=o["$"+u]?parseInt(o["$"+u].val(),10):d,isNaN(s[u])?(h=!0,!1):void 0}}),h?"":(this.$ampm&&(s.hour=s.hour===12?this.$ampm.val()==="am"?0:12:this.$ampm.val()==="am"?s.hour:s.hour+12),i=moment([s.year,s.month,s.day,s.hour,s.minute,s.second]),this.highlight(i),t=t===void 0?this.options.format:t,t===null?i.isValid()?i:null:i.isValid()?i.format(t):"")},setValue:function(t){function i(u,d){var v={};return u.children("option").each(function(f,g){var r,a=e(g).attr("value");a!==""&&(r=Math.abs(a-d),(typeof v.distance>"u"||r<v.distance)&&(v={value:a,distance:r}))}),v.value}if(t){var s=typeof t=="string"?moment(t,this.options.format):moment(t),o=this,h={};s.isValid()&&(e.each(this.map,function(u,d){u!=="ampm"&&(h[u]=s[d[1]]())}),this.$ampm&&(h.hour>=12?(h.ampm="pm",h.hour>12&&(h.hour-=12)):(h.ampm="am",h.hour===0&&(h.hour=12))),e.each(h,function(u,d){o["$"+u]&&(u==="minute"&&o.options.minuteStep>1&&o.options.roundTime&&(d=i(o["$"+u],d)),u==="second"&&o.options.secondStep>1&&o.options.roundTime&&(d=i(o["$"+u],d)),o["$"+u].val(d))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(s.format(this.options.format)).change())}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},e.fn.combodate=function(t){var i,s=Array.apply(null,arguments);return s.shift(),t==="getValue"&&this.length&&(i=this.eq(0).data("combodate"))?i.getValue.apply(i,s):this.each(function(){var o=e(this),h=o.data("combodate"),u=typeof t=="object"&&t;h||o.data("combodate",h=new n(this,u)),typeof t=="string"&&typeof h[t]=="function"&&h[t].apply(h,s)})},e.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(window.jQuery),function(e){var n=function(t){this.init("combodate",t,n.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),t.combodate=e.fn.editableutils.tryParseJson(t.combodate,!0),this.options.combodate=e.extend({},n.defaults.combodate,t.combodate,{format:this.options.format,template:this.options.template})};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.$input.combodate(this.options.combodate),e.fn.editableform.engine==="bs3"&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(t,i){var s=t?t.format(this.options.viewformat):"";n.superclass.value2html.call(this,s,i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),e.fn.editabletypes.combodate=n}(window.jQuery),function(e){var n=e.fn.editableform.Constructor.prototype.initInput;e.extend(e.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=e(e.fn.editableform.template),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){n.apply(this);var t=this.input.options.inputclass===null||this.input.options.inputclass===!1,i="input-medium",s="text,select,textarea,password,email,url,tel,number,range,time".split(",");~e.inArray(this.input.type,s)&&t&&(this.input.options.inputclass=i,this.input.$input.addClass(i))}}),e.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn editable-cancel"><i class="icon-remove"></i></button>',e.fn.editableform.errorGroupClass="error",e.fn.editableform.errorBlockClass=null,e.fn.editableform.engine="bs2"}(window.jQuery),function(e){e.extend(e.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:e.fn.popover&&e(e.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",defaults:e.fn.popover.defaults,initContainer:function(){e.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var n;this.$element.data("template")&&(n=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),n&&this.$element.data("template",n)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(n,t){this.container().options[n]=t},setPosition:function(){(function(){var n,t,i,s,o,h,u,d,v,f,g=this.tip();switch(o=typeof this.options.placement=="function"?this.options.placement.call(this,g[0],this.$element[0]):this.options.placement,n=/in/.test(o),g.removeClass("top right bottom left").css({top:0,left:0,display:"block"}),t=this.getPosition(n),i=g[0].offsetWidth,s=g[0].offsetHeight,o=n?o.split(" ")[1]:o,d={top:t.top+t.height,left:t.left+t.width/2-i/2},u={top:t.top-s,left:t.left+t.width/2-i/2},v={top:t.top+t.height/2-s/2,left:t.left-i},f={top:t.top+t.height/2-s/2,left:t.left+t.width},o){case"bottom":d.top+s>e(window).scrollTop()+e(window).height()&&(o=u.top>e(window).scrollTop()?"top":f.left+i<e(window).scrollLeft()+e(window).width()?"right":v.left>e(window).scrollLeft()?"left":"right");break;case"top":u.top<e(window).scrollTop()&&(o=d.top+s<e(window).scrollTop()+e(window).height()?"bottom":f.left+i<e(window).scrollLeft()+e(window).width()?"right":v.left>e(window).scrollLeft()?"left":"right");break;case"left":v.left<e(window).scrollLeft()&&(o=f.left+i<e(window).scrollLeft()+e(window).width()?"right":u.top>e(window).scrollTop()?"top":u.top>e(window).scrollTop()?"bottom":"right");break;case"right":f.left+i>e(window).scrollLeft()+e(window).width()&&(v.left>e(window).scrollLeft()?o="left":u.top>e(window).scrollTop()?o="top":u.top>e(window).scrollTop()&&(o="bottom"))}switch(o){case"bottom":h=d;break;case"top":h=u;break;case"left":h=v;break;case"right":h=f}g.offset(h).addClass(o).addClass("in")}).call(this.container())}})}(window.jQuery),function(e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function t(r,w){var l,p=e(r).data(),c={},m=new RegExp("^"+w.toLowerCase()+"([A-Z])"),w=new RegExp("^"+w.toLowerCase());for(var D in p)w.test(D)&&(l=D.replace(m,function(y,C){return C.toLowerCase()}),c[l]=p[D]);return c}function i(r){var a={};if(f[r]||(r=r.split("-")[0],f[r])){var l=f[r];return e.each(v,function(p,c){c in l&&(a[c]=l[c])}),a}}var s=function(r,a){this._process_options(a),this.element=e(r),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=e(g.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(l,p){return parseInt(p)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};s.prototype={constructor:s,_process_options:function(r){this._o=e.extend({},this._o,r);var a=this.o=e.extend({},this._o),l=a.language;switch(f[l]||(l=l.split("-")[0],f[l]||(l=d.language)),a.language=l,a.startView){case 2:case"decade":a.startView=2;break;case 1:case"year":a.startView=1;break;default:a.startView=0}switch(a.minViewMode){case 1:case"months":a.minViewMode=1;break;case 2:case"years":a.minViewMode=2;break;default:a.minViewMode=0}a.startView=Math.max(a.startView,a.minViewMode),a.weekStart%=7,a.weekEnd=(a.weekStart+6)%7;var p=g.parseFormat(a.format);a.startDate!==-1/0&&(a.startDate=g.parseDate(a.startDate,p,a.language)),1/0!==a.endDate&&(a.endDate=g.parseDate(a.endDate,p,a.language)),a.daysOfWeekDisabled=a.daysOfWeekDisabled||[],e.isArray(a.daysOfWeekDisabled)||(a.daysOfWeekDisabled=a.daysOfWeekDisabled.split(/[,\s]*/)),a.daysOfWeekDisabled=e.map(a.daysOfWeekDisabled,function(c){return parseInt(c,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(r){for(var a,l,p=0;p<r.length;p++)a=r[p][0],l=r[p][1],a.on(l)},_unapplyEvents:function(r){for(var a,l,p=0;p<r.length;p++)a=r[p][0],l=r[p][1],a.off(l)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(r){this.element.is(r.target)||this.element.find(r.target).size()||this.picker.is(r.target)||this.picker.find(r.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(r,a){var l=a||this.date,p=new Date(l.getTime()+6e4*l.getTimezoneOffset());this.element.trigger({type:r,date:p,format:e.proxy(function(c){var m=c||this.o.format;return g.formatDate(l,m,this.o.language)},this)})},show:function(r){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),r&&r.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var r=this.getUTCDate();return new Date(r.getTime()+6e4*r.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(r){this.setUTCDate(new Date(r.getTime()-6e4*r.getTimezoneOffset()))},setUTCDate:function(r){this.date=r,this.setValue()},setValue:function(){var r=this.getFormattedDate();this.isInput?this.element.val(r):this.component&&this.element.find("input").val(r)},getFormattedDate:function(r){return r===void 0&&(r=this.o.format),g.formatDate(this.date,r,this.o.language)},setStartDate:function(r){this._process_options({startDate:r}),this.update(),this.updateNavArrows()},setEndDate:function(r){this._process_options({endDate:r}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(r){this._process_options({daysOfWeekDisabled:r}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var r=parseInt(this.element.parents().filter(function(){return e(this).css("z-index")!="auto"}).first().css("z-index"))+10,a=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:a.top+l,left:a.left,zIndex:r})}},_allow_update:!0,update:function(){if(this._allow_update){var r,a=!1;arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date)?(r=arguments[0],a=!0):(r=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=g.parseDate(r,this.o.format,this.o.language),a&&this.setValue(),this.viewDate=this.date<this.o.startDate?new Date(this.o.startDate):this.date>this.o.endDate?new Date(this.o.endDate):new Date(this.date),this.fill()}},fillDow:function(){var r=this.o.weekStart,a="<tr>";if(this.o.calendarWeeks){var l='<th class="cw">&nbsp;</th>';a+=l,this.picker.find(".datepicker-days thead tr:first-child").prepend(l)}for(;r<this.o.weekStart+7;)a+='<th class="dow">'+f[this.o.language].daysMin[r++%7]+"</th>";a+="</tr>",this.picker.find(".datepicker-days thead").append(a)},fillMonths:function(){for(var r="",a=0;12>a;)r+='<span class="month">'+f[this.o.language].monthsShort[a++]+"</span>";this.picker.find(".datepicker-months td").html(r)},setRange:function(r){r&&r.length?this.range=e.map(r,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(r){var a=[],l=this.viewDate.getUTCFullYear(),p=this.viewDate.getUTCMonth(),c=this.date.valueOf(),m=new Date;return r.getUTCFullYear()<l||r.getUTCFullYear()==l&&r.getUTCMonth()<p?a.push("old"):(r.getUTCFullYear()>l||r.getUTCFullYear()==l&&r.getUTCMonth()>p)&&a.push("new"),this.o.todayHighlight&&r.getUTCFullYear()==m.getFullYear()&&r.getUTCMonth()==m.getMonth()&&r.getUTCDate()==m.getDate()&&a.push("today"),c&&r.valueOf()==c&&a.push("active"),(r.valueOf()<this.o.startDate||r.valueOf()>this.o.endDate||e.inArray(r.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&a.push("disabled"),this.range&&(r>this.range[0]&&r<this.range[this.range.length-1]&&a.push("range"),e.inArray(r.valueOf(),this.range)!=-1&&a.push("selected")),a},fill:function(){var r,a=new Date(this.viewDate),l=a.getUTCFullYear(),p=a.getUTCMonth(),c=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,m=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,w=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,D=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf(),this.picker.find(".datepicker-days thead th.datepicker-switch").text(f[this.o.language].months[p]+" "+l),this.picker.find("tfoot th.today").text(f[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(f[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var y=n(l,p-1,28,0,0,0,0),C=g.getDaysInMonth(y.getUTCFullYear(),y.getUTCMonth());y.setUTCDate(C),y.setUTCDate(C-(y.getUTCDay()-this.o.weekStart+7)%7);var b=new Date(y);b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();for(var x,T=[];y.valueOf()<b;){if(y.getUTCDay()==this.o.weekStart&&(T.push("<tr>"),this.o.calendarWeeks)){var M=new Date(+y+864e5*((this.o.weekStart-y.getUTCDay()-7)%7)),U=new Date(+M+864e5*((11-M.getUTCDay())%7)),F=new Date(+(F=n(U.getUTCFullYear(),0,1))+864e5*((11-F.getUTCDay())%7)),j=(U-F)/864e5/7+1;T.push('<td class="cw">'+j+"</td>")}x=this.getClassNames(y),x.push("day");var k=this.o.beforeShowDay(y);k===void 0?k={}:typeof k=="boolean"?k={enabled:k}:typeof k=="string"&&(k={classes:k}),k.enabled===!1&&x.push("disabled"),k.classes&&(x=x.concat(k.classes.split(/\s+/))),k.tooltip&&(r=k.tooltip),x=e.unique(x),T.push('<td class="'+x.join(" ")+'"'+(r?' title="'+r+'"':"")+">"+y.getUTCDate()+"</td>"),y.getUTCDay()==this.o.weekEnd&&T.push("</tr>"),y.setUTCDate(y.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(T.join(""));var $=this.date&&this.date.getUTCFullYear(),O=this.picker.find(".datepicker-months").find("th:eq(1)").text(l).end().find("span").removeClass("active");$&&$==l&&O.eq(this.date.getUTCMonth()).addClass("active"),(c>l||l>w)&&O.addClass("disabled"),l==c&&O.slice(0,m).addClass("disabled"),l==w&&O.slice(D+1).addClass("disabled"),T="",l=10*parseInt(l/10,10);var A=this.picker.find(".datepicker-years").find("th:eq(1)").text(l+"-"+(l+9)).end().find("td");l-=1;for(var S=-1;11>S;S++)T+='<span class="year'+(S==-1?" old":S==10?" new":"")+($==l?" active":"")+(c>l||l>w?" disabled":"")+'">'+l+"</span>",l+=1;A.html(T)},updateNavArrows:function(){if(this._allow_update){var r=new Date(this.viewDate),a=r.getUTCFullYear(),l=r.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&a<=this.o.startDate.getUTCFullYear()&&l<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&a>=this.o.endDate.getUTCFullYear()&&l>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&a<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&a>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(r){r.preventDefault();var a=e(r.target).closest("span, td, th");if(a.length==1)switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var l=g.modes[this.viewMode].navStep*(a[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,l);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,l)}this.fill();break;case"today":var p=new Date;p=n(p.getFullYear(),p.getMonth(),p.getDate(),0,0,0),this.showMode(-2);var c=this.o.todayBtn=="linked"?null:"view";this._setDate(p,c);break;case"clear":var m;this.isInput?m=this.element:this.component&&(m=this.element.find("input")),m&&m.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!a.is(".disabled")){if(this.viewDate.setUTCDate(1),a.is(".month")){var w=1,D=a.parent().find("span").index(a),y=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(D),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(n(y,D,w,0,0,0,0))}else{var y=parseInt(a.text(),10)||0,w=1,D=0;this.viewDate.setUTCFullYear(y),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(n(y,D,w,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(a.is(".day")&&!a.is(".disabled")){var w=parseInt(a.text(),10)||1,y=this.viewDate.getUTCFullYear(),D=this.viewDate.getUTCMonth();a.is(".old")?D===0?(D=11,y-=1):D-=1:a.is(".new")&&(D==11?(D=0,y+=1):D+=1),this._setDate(n(y,D,w,0,0,0,0))}}},_setDate:function(r,a){a&&a!="date"||(this.date=new Date(r)),a&&a!="view"||(this.viewDate=new Date(r)),this.fill(),this.setValue(),this._trigger("changeDate");var l;this.isInput?l=this.element:this.component&&(l=this.element.find("input")),l&&(l.change(),!this.o.autoclose||a&&a!="date"||this.hide())},moveMonth:function(r,a){if(!a)return r;var l,p,c=new Date(r.valueOf()),m=c.getUTCDate(),w=c.getUTCMonth(),D=Math.abs(a);if(a=a>0?1:-1,D==1)p=a==-1?function(){return c.getUTCMonth()==w}:function(){return c.getUTCMonth()!=l},l=w+a,c.setUTCMonth(l),(0>l||l>11)&&(l=(l+12)%12);else{for(var y=0;D>y;y++)c=this.moveMonth(c,a);l=c.getUTCMonth(),c.setUTCDate(m),p=function(){return l!=c.getUTCMonth()}}for(;p();)c.setUTCDate(--m),c.setUTCMonth(l);return c},moveYear:function(r,a){return this.moveMonth(r,12*a)},dateWithinRange:function(r){return r>=this.o.startDate&&r<=this.o.endDate},keydown:function(r){if(this.picker.is(":not(:visible)"))return r.keyCode==27&&this.show(),void 0;var a,l,p,c=!1;switch(r.keyCode){case 27:this.hide(),r.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;a=r.keyCode==37?-1:1,r.ctrlKey?(l=this.moveYear(this.date,a),p=this.moveYear(this.viewDate,a)):r.shiftKey?(l=this.moveMonth(this.date,a),p=this.moveMonth(this.viewDate,a)):(l=new Date(this.date),l.setUTCDate(this.date.getUTCDate()+a),p=new Date(this.viewDate),p.setUTCDate(this.viewDate.getUTCDate()+a)),this.dateWithinRange(l)&&(this.date=l,this.viewDate=p,this.setValue(),this.update(),r.preventDefault(),c=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;a=r.keyCode==38?-1:1,r.ctrlKey?(l=this.moveYear(this.date,a),p=this.moveYear(this.viewDate,a)):r.shiftKey?(l=this.moveMonth(this.date,a),p=this.moveMonth(this.viewDate,a)):(l=new Date(this.date),l.setUTCDate(this.date.getUTCDate()+7*a),p=new Date(this.viewDate),p.setUTCDate(this.viewDate.getUTCDate()+7*a)),this.dateWithinRange(l)&&(this.date=l,this.viewDate=p,this.setValue(),this.update(),r.preventDefault(),c=!0);break;case 13:this.hide(),r.preventDefault();break;case 9:this.hide()}if(c){this._trigger("changeDate");var m;this.isInput?m=this.element:this.component&&(m=this.element.find("input")),m&&m.change()}},showMode:function(r){r&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+r))),this.picker.find(">div").hide().filter(".datepicker-"+g.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var o=function(r,a){this.element=e(r),this.inputs=e.map(a.inputs,function(l){return l.jquery?l[0]:l}),delete a.inputs,e(this.inputs).datepicker(a).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(l){return e(l).data("datepicker")}),this.updateDates()};o.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(r){return r.date}),this.updateRanges()},updateRanges:function(){var r=e.map(this.dates,function(a){return a.valueOf()});e.each(this.pickers,function(a,l){l.setRange(r)})},dateUpdated:function(r){var a=e(r.target).data("datepicker"),l=a.getUTCDate(),p=e.inArray(r.target,this.inputs),c=this.inputs.length;if(p!=-1){if(l<this.dates[p])for(;p>=0&&l<this.dates[p];)this.pickers[p--].setUTCDate(l);else if(l>this.dates[p])for(;c>p&&l>this.dates[p];)this.pickers[p++].setUTCDate(l);this.updateDates()}},remove:function(){e.map(this.pickers,function(r){r.remove()}),delete this.element.data().datepicker}};var h=e.fn.datepicker,u=e.fn.datepicker=function(r){var a=Array.apply(null,arguments);a.shift();var l;return this.each(function(){var p=e(this),c=p.data("datepicker"),m=typeof r=="object"&&r;if(!c){var w=t(this,"date"),D=e.extend({},d,w,m),y=i(D.language),C=e.extend({},d,y,w,m);if(p.is(".input-daterange")||C.inputs){var b={inputs:C.inputs||p.find("input").toArray()};p.data("datepicker",c=new o(this,e.extend(C,b)))}else p.data("datepicker",c=new s(this,C))}return typeof r=="string"&&typeof c[r]=="function"&&(l=c[r].apply(c,a),l!==void 0)?!1:void 0}),l!==void 0?l:this},d=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},v=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=s;var f=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(r){return r%4===0&&r%100!==0||r%400===0},getDaysInMonth:function(r,a){return[31,g.isLeapYear(r)?29:28,31,30,31,30,31,31,30,31,30,31][a]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(r){var a=r.replace(this.validParts,"\0").split("\0"),l=r.match(this.validParts);if(!a||!a.length||!l||l.length===0)throw new Error("Invalid date format.");return{separators:a,parts:l}},parseDate:function(b,a,l){if(b instanceof Date)return b;if(typeof a=="string"&&(a=g.parseFormat(a)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(b)){var y,p,c=/([\-+]\d+)([dmwy])/,C=b.match(/([\-+]\d+)([dmwy])/g);b=new Date;for(var m=0;m<C.length;m++)switch(y=c.exec(C[m]),p=parseInt(y[1]),y[2]){case"d":b.setUTCDate(b.getUTCDate()+p);break;case"m":b=s.prototype.moveMonth.call(s.prototype,b,p);break;case"w":b.setUTCDate(b.getUTCDate()+7*p);break;case"y":b=s.prototype.moveYear.call(s.prototype,b,p)}return n(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,0)}var w,D,y,C=b&&b.match(this.nonpunctuation)||[],b=new Date,x={},T=["yyyy","yy","M","MM","m","mm","d","dd"],M={yyyy:function(k,$){return k.setUTCFullYear($)},yy:function(k,$){return k.setUTCFullYear(2e3+$)},m:function(k,$){for($-=1;0>$;)$+=12;for($%=12,k.setUTCMonth($);k.getUTCMonth()!=$;)k.setUTCDate(k.getUTCDate()-1);return k},d:function(k,$){return k.setUTCDate($)}};M.M=M.MM=M.mm=M.m,M.dd=M.d,b=n(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);var U=a.parts.slice();if(C.length!=U.length&&(U=e(U).filter(function(k,$){return e.inArray($,T)!==-1}).toArray()),C.length==U.length){for(var m=0,F=U.length;F>m;m++){if(w=parseInt(C[m],10),y=U[m],isNaN(w))switch(y){case"MM":D=e(f[l].months).filter(function(){var $=this.slice(0,C[m].length),O=C[m].slice(0,$.length);return $==O}),w=e.inArray(D[0],f[l].months)+1;break;case"M":D=e(f[l].monthsShort).filter(function(){var $=this.slice(0,C[m].length),O=C[m].slice(0,$.length);return $==O}),w=e.inArray(D[0],f[l].monthsShort)+1}x[y]=w}for(var j,m=0;m<T.length;m++)j=T[m],j in x&&!isNaN(x[j])&&M[j](b,x[j])}return b},formatDate:function(r,a,l){typeof a=="string"&&(a=g.parseFormat(a));var p={d:r.getUTCDate(),D:f[l].daysShort[r.getUTCDay()],DD:f[l].days[r.getUTCDay()],m:r.getUTCMonth()+1,M:f[l].monthsShort[r.getUTCMonth()],MM:f[l].months[r.getUTCMonth()],yy:r.getUTCFullYear().toString().substring(2),yyyy:r.getUTCFullYear()};p.dd=(p.d<10?"0":"")+p.d,p.mm=(p.m<10?"0":"")+p.m;for(var r=[],c=e.extend([],a.separators),m=0,w=a.parts.length;w>=m;m++)c.length&&r.push(c.shift()),r.push(p[a.parts[m]]);return r.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=g,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=h,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(r){var a=e(this);a.data("datepicker")||(r.preventDefault(),u.call(a,"show"))}),e(function(){u.call(e('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(e){e.fn.bdatepicker=e.fn.datepicker.noConflict(),e.fn.datepicker||(e.fn.datepicker=e.fn.bdatepicker);var n=function(t){this.init("date",t,n.defaults),this.initPicker(t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format),t.datepicker=e.fn.editableutils.tryParseJson(t.datepicker,!0),this.options.datepicker=e.extend({},i.datepicker,t.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=e.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var s=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";n.superclass.value2html.call(this,s,i)},html2value:function(t){return this.parseDate(t,this.parsedViewFormat)},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return this.parseDate(t,this.parsedFormat)},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.bdatepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(t){if(!e(t.currentTarget).is(".old")&&!e(t.currentTarget).is(".new")){var i=e(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(t,i){var s,o=null;return t&&(o=this.dpg.parseDate(t,i,this.options.datepicker.language),typeof t=="string"&&(s=this.dpg.formatDate(o,i,this.options.datepicker.language),t!==s&&(o=null))),o}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),e.fn.editabletypes.date=n}(window.jQuery),function(e){var n=function(t){this.init("datefield",t,n.defaults),this.initPicker(t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.date),e.extend(n.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),n.defaults=e.extend({},e.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),e.fn.editabletypes.datefield=n}(window.jQuery),function(e){var n=function(t){this.init("datetime",t,n.defaults),this.initPicker(t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format),t.datetimepicker=e.fn.editableutils.tryParseJson(t.datetimepicker,!0),this.options.datetimepicker=e.extend({},i.datetimepicker,t.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=e.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(){var t=e(this).closest("form").parent();setTimeout(function(){t.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var s=t?this.dpg.formatDate(this.toUTC(t),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return i?(n.superclass.value2html.call(this,s,i),void 0):s},html2value:function(t){var i=this.parseDate(t,this.parsedViewFormat);return i?this.fromUTC(i):null},value2str:function(t){return t?this.dpg.formatDate(this.toUTC(t),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(t){var i=this.parseDate(t,this.parsedFormat);return i?this.fromUTC(i):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){t&&this.$input.data("datetimepicker").setDate(t)},input2value:function(){var t=this.$input.data("datetimepicker");return t.date?t.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var t=e(this).closest("form");setTimeout(function(){t.submit()},200)})},toUTC:function(t){return t&&new Date(t.valueOf()-6e4*t.getTimezoneOffset())},fromUTC:function(t){return t&&new Date(t.valueOf()+6e4*t.getTimezoneOffset())},parseDate:function(t,i){var s,o=null;return t&&(o=this.dpg.parseDate(t,i,this.options.datetimepicker.language,this.options.formatType),typeof t=="string"&&(s=this.dpg.formatDate(o,i,this.options.datetimepicker.language,this.options.formatType),t!==s&&(o=null))),o}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),e.fn.editabletypes.datetime=n}(window.jQuery),function(e){var n=function(t){this.init("datetimefield",t,n.defaults),this.initPicker(t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.datetime),e.extend(n.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(t){this.$input.val(this.value2html(t)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),n.defaults=e.extend({},e.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),e.fn.editabletypes.datetimefield=n}(window.jQuery),function(e){var n=function(t){this.init("typeahead",t,n.defaults),this.options.typeahead=e.extend({},n.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},t.typeahead)};e.fn.editableutils.inherit(n,e.fn.editabletypes.list),e.extend(n.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]'),this.options.typeahead.source=this.sourceData,this.$input.typeahead(this.options.typeahead);var t=this.$input.data("typeahead");t.render=e.proxy(this.typeaheadRender,t),t.select=e.proxy(this.typeaheadSelect,t),t.move=e.proxy(this.typeaheadMove,t),this.renderClear(),this.setClass(),this.setAttr("placeholder")},value2htmlFinal:function(t,i){if(this.getIsObjects()){var s=e.fn.editableutils.itemsByValue(t,this.sourceData);t=s.length?s[0].text:""}e.fn.editabletypes.abstractinput.prototype.value2html.call(this,t,i)},html2value:function(t){return t||null},value2input:function(t){if(this.getIsObjects()){var i=e.fn.editableutils.itemsByValue(t,this.sourceData);this.$input.data("value",t).val(i.length?i[0].text:"")}else this.$input.val(t)},input2value:function(){if(this.getIsObjects()){var t=this.$input.data("value"),i=e.fn.editableutils.itemsByValue(t,this.sourceData);return i.length&&i[0].text.toLowerCase()===this.$input.val().toLowerCase()?t:null}return this.$input.val()},getIsObjects:function(){if(this.isObjects===void 0){this.isObjects=!1;for(var t=0;t<this.sourceData.length;t++)if(this.sourceData[t].value!==this.sourceData[t].text){this.isObjects=!0;break}}return this.isObjects},activate:e.fn.editabletypes.text.prototype.activate,renderClear:e.fn.editabletypes.text.prototype.renderClear,postrender:e.fn.editabletypes.text.prototype.postrender,toggleClear:e.fn.editabletypes.text.prototype.toggleClear,clear:function(){e.fn.editabletypes.text.prototype.clear.call(this),this.$input.data("value","")},matcher:function(t){return e.fn.typeahead.Constructor.prototype.matcher.call(this,t.text)},sorter:function(t){for(var i,s,o=[],h=[],u=[];i=t.shift();)s=i.text,s.toLowerCase().indexOf(this.query.toLowerCase())?~s.indexOf(this.query)?h.push(i):u.push(i):o.push(i);return o.concat(h,u)},highlighter:function(t){return e.fn.typeahead.Constructor.prototype.highlighter.call(this,t.text)},updater:function(t){return this.$element.data("value",t.value),t.text},typeaheadRender:function(t){var i=this;return t=e(t).map(function(s,o){return s=e(i.options.item).data("item",o),s.find("a").html(i.highlighter(o)),s[0]}),this.options.autoSelect&&t.first().addClass("active"),this.$menu.html(t),this},typeaheadSelect:function(){var t=this.$menu.find(".active").data("item");return(this.options.autoSelect||t)&&this.$element.val(this.updater(t)).change(),this.hide()},typeaheadMove:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:if(!this.$menu.find(".active").length)return;t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}}}),n.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:!0}),e.fn.editabletypes.typeahead=n}(window.jQuery);
