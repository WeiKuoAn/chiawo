import{r as j}from"./jquery-4e911315.js";import{a as S}from"./raphael.min-49329b2b.js";import{r as O}from"./jquery.mousewheel-0f37ab72.js";var b={},R={get exports(){return b},set exports(H){b=H}};/*!
 *
 * Jquery Mapael - Dynamic maps jQuery plugin (based on raphael.js)
 * Requires jQuery, raphael.js and jquery.mousewheel
 *
 * Version: 2.2.0
 *
 * Copyright (c) 2017 Vincent Brout√© (https://www.vincentbroute.fr/mapael)
 * Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php).
 *
 * Thanks to Indigo744
 *
 */var F;function U(){return F||(F=1,function(H,X){(function(m){H.exports=m(j(),S,O())})(function(m,B,Y,s){var w="mapael",P="2.2.0",D=function(t,e){var a=this;a.container=t,a.$container=m(t),a.options=a.extendDefaultOptions(e),a.zoomTO=0,a.zoomCenterX=0,a.zoomCenterY=0,a.previousPinchDist=0,a.zoomData={zoomLevel:0,zoomX:0,zoomY:0,panX:0,panY:0},a.currentViewBox={x:0,y:0,w:0,h:0},a.panning=!1,a.zoomAnimID=null,a.zoomAnimStartTime=null,a.zoomAnimCVBTarget=null,a.$map=m("."+a.options.map.cssClass,a.container),a.initialMapHTMLContent=a.$map.html(),a.$tooltip={},a.paper={},a.areas={},a.plots={},a.links={},a.legends={},a.mapConf={},a.customEventHandlers={},a.init()};return D.prototype={MouseOverFilteringTO:120,panningFilteringTO:150,panningEndFilteringTO:50,zoomFilteringTO:150,resizeFilteringTO:150,init:function(){var t=this;if(t.options.map.cssClass===""||m("."+t.options.map.cssClass,t.container).length===0)throw new Error("The map class `"+t.options.map.cssClass+"` doesn't exists");if(t.$tooltip=m("<div>").addClass(t.options.map.tooltip.cssClass).css("display","none"),t.$map.empty().append(t.$tooltip),m[w]&&m[w].maps&&m[w].maps[t.options.map.name])t.mapConf=m[w].maps[t.options.map.name];else if(m.fn[w]&&m.fn[w].maps&&m.fn[w].maps[t.options.map.name])t.mapConf=m.fn[w].maps[t.options.map.name],window.console&&window.console.warn&&window.console.warn("Extending $.fn.mapael is deprecated (map '"+t.options.map.name+"')");else throw new Error("Unknown map '"+t.options.map.name+"'");if(t.paper=new B(t.$map[0],t.mapConf.width,t.mapConf.height),t.isRaphaelBBoxBugPresent()===!0)throw t.destroy(),new Error("Can't get boundary box for text (is your container hidden? See #135)");t.$container.addClass(w),t.options.map.tooltip.css&&t.$tooltip.css(t.options.map.tooltip.css),t.setViewBox(0,0,t.mapConf.width,t.mapConf.height),t.options.map.width?t.paper.setSize(t.options.map.width,t.mapConf.height*(t.options.map.width/t.mapConf.width)):t.initResponsiveSize(),m.each(t.mapConf.elems,function(e){t.areas[e]={},t.areas[e].options=t.getElemOptions(t.options.map.defaultArea,t.options.areas[e]?t.options.areas[e]:{},t.options.legend.area),t.areas[e].mapElem=t.paper.path(t.mapConf.elems[e])}),t.options.map.beforeInit&&t.options.map.beforeInit(t.$container,t.paper,t.options),m.each(t.mapConf.elems,function(e){t.initElem(e,"area",t.areas[e])}),t.links=t.drawLinksCollection(t.options.links),m.each(t.options.plots,function(e){t.plots[e]=t.drawPlot(e)}),t.$container.on("zoom."+w,function(e,a){t.onZoomEvent(e,a)}),t.options.map.zoom.enabled&&t.initZoom(t.mapConf.width,t.mapConf.height,t.options.map.zoom),t.options.map.zoom.init!==s&&(t.options.map.zoom.init.animDuration===s&&(t.options.map.zoom.init.animDuration=0),t.$container.trigger("zoom",t.options.map.zoom.init)),t.createLegends("area",t.areas,1),t.createLegends("plot",t.plots,t.paper.width/t.mapConf.width),t.$container.on("update."+w,function(e,a){t.onUpdateEvent(e,a)}),t.$container.on("showElementsInRange."+w,function(e,a){t.onShowElementsInRange(e,a)}),t.initDelegatedMapEvents(),t.initDelegatedCustomEvents(),t.options.map.afterInit&&t.options.map.afterInit(t.$container,t.paper,t.areas,t.plots,t.options),m(t.paper.desc).append(" and Mapael "+t.version+" (https://www.vincentbroute.fr/mapael/)")},destroy:function(){var t=this;t.$container.off("."+w),t.$map.off("."+w),t.onResizeEvent&&m(window).off("resize."+w,t.onResizeEvent),t.$map.empty(),t.$map.html(t.initialMapHTMLContent),m.each(t.legends,function(e){m.each(t.legends[e],function(a){var o=t.legends[e][a];o.container.empty(),o.container.html(o.initialHTMLContent)})}),t.$container.removeClass(w),t.$container.removeData(w),t.container=s,t.$container=s,t.options=s,t.paper=s,t.$map=s,t.$tooltip=s,t.mapConf=s,t.areas=s,t.plots=s,t.links=s,t.customEventHandlers=s},initResponsiveSize:function(){var t=this,e=null,a=function(o){var i=t.$map.width();if(t.paper.width!==i){var r=i/t.mapConf.width;t.paper.setSize(i,t.mapConf.height*r),o!==!0&&t.options.legend.redrawOnResize&&t.createLegends("plot",t.plots,r)}};t.onResizeEvent=function(){clearTimeout(e),e=setTimeout(function(){a()},t.resizeFilteringTO)},m(window).on("resize."+w,t.onResizeEvent),a(!0)},extendDefaultOptions:function(t){return t=m.extend(!0,{},D.prototype.defaultOptions,t),m.each(["area","plot"],function(e,a){if(m.isArray(t.legend[a]))for(var o=0;o<t.legend[a].length;++o)t.legend[a][o]=m.extend(!0,{},D.prototype.legendDefaultOptions[a],t.legend[a][o]);else t.legend[a]=m.extend(!0,{},D.prototype.legendDefaultOptions[a],t.legend[a])}),t},initDelegatedMapEvents:function(){var t=this,e={area:t.areas,"area-text":t.areas,plot:t.plots,"plot-text":t.plots,link:t.links,"link-text":t.links},a;t.$container.on("mouseover."+w,"[data-id]",function(){var i=this;clearTimeout(a),a=setTimeout(function(){var r=m(i),l=r.attr("data-id"),f=r.attr("data-type");if(e[f]!==s)t.elemEnter(e[f][l]);else if(f==="legend-elem"||f==="legend-label"){var v=r.attr("data-legend-id"),p=r.attr("data-legend-type");t.elemEnter(t.legends[p][v].elems[l])}},t.MouseOverFilteringTO)});var o;t.$container.on("mousemove."+w,"[data-id]",function(i){var r=this;clearTimeout(o),o=setTimeout(function(){var l=m(r),f=l.attr("data-id"),v=l.attr("data-type");e[v]!==s&&t.elemHover(e[v][f],i)},0)}),t.$container.on("mouseout."+w,"[data-id]",function(){var i=this;clearTimeout(a),clearTimeout(o);var r=m(i),l=r.attr("data-id"),f=r.attr("data-type");if(e[f]!==s)t.elemOut(e[f][l]);else if(f==="legend-elem"||f==="legend-label"){var v=r.attr("data-legend-id"),p=r.attr("data-legend-type");t.elemOut(t.legends[p][v].elems[l])}}),t.$container.on("click."+w,"[data-id]",function(i,r){var l=m(this),f=l.attr("data-id"),v=l.attr("data-type");if(e[v]!==s)t.elemClick(e[v][f]);else if(v==="legend-elem"||v==="legend-label"){var p=l.attr("data-legend-id"),h=l.attr("data-legend-type");t.handleClickOnLegendElem(t.legends[h][p].elems[f],f,p,h,r)}})},initDelegatedCustomEvents:function(){var t=this;m.each(t.customEventHandlers,function(e){var a=e+"."+w+".custom";t.$container.off(a).on(a,"[data-id]",function(o){var i=m(this),r=i.attr("data-id"),l=i.attr("data-type").replace("-text","");if(!t.panning&&t.customEventHandlers[e][l]!==s&&t.customEventHandlers[e][l][r]!==s){var f=t.customEventHandlers[e][l][r];f.options.eventHandlers[e](o,r,f.mapElem,f.textElem,f.options)}})})},initElem:function(t,e,a){var o=this,i=m(a.mapElem.node);if(a.options.href&&(a.options.attrs.cursor="pointer",a.options.text&&(a.options.text.attrs.cursor="pointer")),a.mapElem.attr(a.options.attrs),i.attr({"data-id":t,"data-type":e}),a.options.cssClass!==s&&i.addClass(a.options.cssClass),a.options.text&&a.options.text.content!==s){var r=o.getTextPosition(a.mapElem.getBBox(),a.options.text.position,a.options.text.margin);a.options.text.attrs.text=a.options.text.content,a.options.text.attrs.x=r.x,a.options.text.attrs.y=r.y,a.options.text.attrs["text-anchor"]=r.textAnchor,a.textElem=o.paper.text(r.x,r.y,a.options.text.content),a.textElem.attr(a.options.text.attrs),m(a.textElem.node).attr({"data-id":t,"data-type":e+"-text"})}a.options.eventHandlers&&o.setEventHandlers(t,e,a),o.setHoverOptions(a.mapElem,a.options.attrs,a.options.attrsHover),a.textElem&&o.setHoverOptions(a.textElem,a.options.text.attrs,a.options.text.attrsHover)},initZoom:function(t,e,a){var o=this,i=!1,r=0,l=0,f={reset:function(){o.$container.trigger("zoom",{level:0})},in:function(){o.$container.trigger("zoom",{level:"+1"})},out:function(){o.$container.trigger("zoom",{level:-1})}};m.extend(o.zoomData,{zoomLevel:0,panX:0,panY:0}),m.each(a.buttons,function(h,u){if(f[h]===s)throw new Error("Unknown zoom button '"+h+"'");var g=m("<div>").addClass(u.cssClass).html(u.content).attr("title",u.title);g.on("click."+w,f[h]),o.$map.append(g)}),o.options.map.zoom.mousewheel&&o.$map.on("mousewheel."+w,function(h){var u=h.deltaY>0?1:-1,g=o.mapPagePositionToXY(h.pageX,h.pageY);o.$container.trigger("zoom",{fixedCenter:!0,level:o.zoomData.zoomLevel+u,x:g.x,y:g.y}),h.preventDefault()}),o.options.map.zoom.touch&&(o.$map.on("touchstart."+w,function(h){h.originalEvent.touches.length===2&&(o.zoomCenterX=(h.originalEvent.touches[0].pageX+h.originalEvent.touches[1].pageX)/2,o.zoomCenterY=(h.originalEvent.touches[0].pageY+h.originalEvent.touches[1].pageY)/2,o.previousPinchDist=Math.sqrt(Math.pow(h.originalEvent.touches[1].pageX-h.originalEvent.touches[0].pageX,2)+Math.pow(h.originalEvent.touches[1].pageY-h.originalEvent.touches[0].pageY,2)))}),o.$map.on("touchmove."+w,function(h){var u=0,g=0;if(h.originalEvent.touches.length===2){if(u=Math.sqrt(Math.pow(h.originalEvent.touches[1].pageX-h.originalEvent.touches[0].pageX,2)+Math.pow(h.originalEvent.touches[1].pageY-h.originalEvent.touches[0].pageY,2)),Math.abs(u-o.previousPinchDist)>15){var n=o.mapPagePositionToXY(o.zoomCenterX,o.zoomCenterY);g=(u-o.previousPinchDist)/Math.abs(u-o.previousPinchDist),o.$container.trigger("zoom",{fixedCenter:!0,level:o.zoomData.zoomLevel+g,x:n.x,y:n.y}),o.previousPinchDist=u}return!1}})),o.$map.on("dragstart",function(){return!1});var v=null,p=null;m("body").on("mouseup."+w+(a.touch?" touchend."+w:""),function(){i=!1,clearTimeout(v),clearTimeout(p),v=setTimeout(function(){o.panning=!1},o.panningEndFilteringTO)}),o.$map.on("mousedown."+w+(a.touch?" touchstart."+w:""),function(h){clearTimeout(v),clearTimeout(p),h.pageX!==s?(i=!0,r=h.pageX,l=h.pageY):h.originalEvent.touches.length===1&&(i=!0,r=h.originalEvent.touches[0].pageX,l=h.originalEvent.touches[0].pageY)}).on("mousemove."+w+(a.touch?" touchmove."+w:""),function(h){var u=o.zoomData.zoomLevel,g=0,n=0;if(clearTimeout(v),clearTimeout(p),h.pageX!==s?(g=h.pageX,n=h.pageY):h.originalEvent.touches.length===1?(g=h.originalEvent.touches[0].pageX,n=h.originalEvent.touches[0].pageY):i=!1,i&&u!==0){var x=(r-g)/(1+u*a.step)*(t/o.paper.width),y=(l-n)/(1+u*a.step)*(e/o.paper.height),d=Math.min(Math.max(0,o.currentViewBox.x+x),t-o.currentViewBox.w),c=Math.min(Math.max(0,o.currentViewBox.y+y),e-o.currentViewBox.h);return(Math.abs(x)>5||Math.abs(y)>5)&&(m.extend(o.zoomData,{panX:d,panY:c,zoomX:d+o.currentViewBox.w/2,zoomY:c+o.currentViewBox.h/2}),o.setViewBox(d,c,o.currentViewBox.w,o.currentViewBox.h),p=setTimeout(function(){o.$map.trigger("afterPanning",{x1:d,y1:c,x2:d+o.currentViewBox.w,y2:c+o.currentViewBox.h})},o.panningFilteringTO),r=g,l=n,o.panning=!0),!1}})},mapPagePositionToXY:function(t,e){var a=this,o=a.$map.offset(),i=a.options.map.width?a.mapConf.width/a.options.map.width:a.mapConf.width/a.$map.width(),r=1/(1+a.zoomData.zoomLevel*a.options.map.zoom.step);return{x:r*i*(t-o.left)+a.zoomData.panX,y:r*i*(e-o.top)+a.zoomData.panY}},onZoomEvent:function(t,e){var a=this,o,i,r,l,f=a.zoomData.zoomLevel,v=1+a.zoomData.zoomLevel*a.options.map.zoom.step,p,h=e.animDuration!==s?e.animDuration:a.options.map.zoom.animDuration;if(e.area!==s){if(a.areas[e.area]===s)throw new Error("Unknown area '"+e.area+"'");var u=e.areaMargin!==s?e.areaMargin:10,g=a.areas[e.area].mapElem.getBBox(),n=g.width+2*u,x=g.height+2*u;e.x=g.cx,e.y=g.cy,f=Math.min(Math.floor((a.mapConf.width/n-1)/a.options.map.zoom.step),Math.floor((a.mapConf.height/x-1)/a.options.map.zoom.step))}else if(e.level!==s&&(typeof e.level=="string"?e.level.slice(0,1)==="+"||e.level.slice(0,1)==="-"?f=a.zoomData.zoomLevel+parseInt(e.level,10):f=parseInt(e.level,10):e.level<0?f=a.zoomData.zoomLevel+e.level:f=e.level),e.plot!==s){if(a.plots[e.plot]===s)throw new Error("Unknown plot '"+e.plot+"'");e.x=a.plots[e.plot].coords.x,e.y=a.plots[e.plot].coords.y}else{if(e.latitude!==s&&e.longitude!==s){var y=a.mapConf.getCoords(e.latitude,e.longitude);e.x=y.x,e.y=y.y}e.x===s&&(e.x=a.currentViewBox.x+a.currentViewBox.w/2),e.y===s&&(e.y=a.currentViewBox.y+a.currentViewBox.h/2)}f=Math.min(Math.max(f,a.options.map.zoom.minLevel),a.options.map.zoom.maxLevel),p=1+f*a.options.map.zoom.step,r=a.mapConf.width/p,l=a.mapConf.height/p,f===0?(o=0,i=0):(e.fixedCenter!==s&&e.fixedCenter===!0?(o=a.zoomData.panX+(e.x-a.zoomData.panX)*(p-v)/p,i=a.zoomData.panY+(e.y-a.zoomData.panY)*(p-v)/p):(o=e.x-r/2,i=e.y-l/2),o=Math.min(Math.max(0,o),a.mapConf.width-r),i=Math.min(Math.max(0,i),a.mapConf.height-l)),!(p===v&&o===a.zoomData.panX&&i===a.zoomData.panY)&&(h>0?a.animateViewBox(o,i,r,l,h,a.options.map.zoom.animEasing):(a.setViewBox(o,i,r,l),clearTimeout(a.zoomTO),a.zoomTO=setTimeout(function(){a.$map.trigger("afterZoom",{x1:o,y1:i,x2:o+r,y2:i+l})},a.zoomFilteringTO)),m.extend(a.zoomData,{zoomLevel:f,panX:o,panY:i,zoomX:o+r/2,zoomY:i+l/2}))},onShowElementsInRange:function(t,e){var a=this;e.animDuration===s&&(e.animDuration=0),e.hiddenOpacity===s&&(e.hiddenOpacity=.3),e.ranges&&e.ranges.area&&a.showElemByRange(e.ranges.area,a.areas,e.hiddenOpacity,e.animDuration),e.ranges&&e.ranges.plot&&a.showElemByRange(e.ranges.plot,a.plots,e.hiddenOpacity,e.animDuration),e.ranges&&e.ranges.link&&a.showElemByRange(e.ranges.link,a.links,e.hiddenOpacity,e.animDuration),e.afterShowRange&&e.afterShowRange()},showElemByRange:function(t,e,a,o){var i=this,r={};(t.min!==s||t.max!==s)&&(t={0:t}),m.each(t,function(l){var f=t[l];if(f.min===s&&f.max===s)return!0;m.each(e,function(v){var p=e[v].options.value;if(typeof p!="object"&&(p=[p]),p[l]===s)return!0;f.min!==s&&p[l]<f.min||f.max!==s&&p[l]>f.max?r[v]=a:r[v]=1})}),m.each(r,function(l){i.setElementOpacity(e[l],r[l],o)})},setElementOpacity:function(t,e,a){var o=this;e>0&&(t.mapElem.show(),t.textElem&&t.textElem.show()),o.animate(t.mapElem,{opacity:e},a,function(){e===0&&t.mapElem.hide()}),o.animate(t.textElem,{opacity:e},a,function(){e===0&&t.textElem.hide()})},onUpdateEvent:function(t,e){var a=this;if(typeof e=="object"){var o=0,i=e.animDuration?e.animDuration:0,r=function(p){a.animate(p.mapElem,{opacity:0},i,function(){p.mapElem.remove()}),a.animate(p.textElem,{opacity:0},i,function(){p.textElem.remove()})},l=function(p){p.mapElem.attr({opacity:0}),p.textElem&&p.textElem.attr({opacity:0}),a.setElementOpacity(p,p.mapElem.originalAttrs.opacity!==s?p.mapElem.originalAttrs.opacity:1,i)};if(typeof e.mapOptions=="object"&&(e.replaceOptions===!0?a.options=a.extendDefaultOptions(e.mapOptions):m.extend(!0,a.options,e.mapOptions),(e.mapOptions.areas!==s||e.mapOptions.plots!==s||e.mapOptions.legend!==s)&&m("[data-type='legend-elem']",a.$container).each(function(p,h){m(h).attr("data-hidden")==="1"&&m(h).trigger("click",{hideOtherElems:!1,animDuration:i})})),typeof e.deletePlotKeys=="object")for(;o<e.deletePlotKeys.length;o++)a.plots[e.deletePlotKeys[o]]!==s&&(r(a.plots[e.deletePlotKeys[o]]),delete a.plots[e.deletePlotKeys[o]]);else e.deletePlotKeys==="all"&&(m.each(a.plots,function(p,h){r(h)}),a.plots={});if(typeof e.deleteLinkKeys=="object")for(o=0;o<e.deleteLinkKeys.length;o++)a.links[e.deleteLinkKeys[o]]!==s&&(r(a.links[e.deleteLinkKeys[o]]),delete a.links[e.deleteLinkKeys[o]]);else e.deleteLinkKeys==="all"&&(m.each(a.links,function(p,h){r(h)}),a.links={});if(typeof e.newPlots=="object"&&m.each(e.newPlots,function(p){a.plots[p]===s&&(a.options.plots[p]=e.newPlots[p],a.plots[p]=a.drawPlot(p),i>0&&l(a.plots[p]))}),typeof e.newLinks=="object"){var f=a.drawLinksCollection(e.newLinks);m.extend(a.links,f),m.extend(a.options.links,e.newLinks),i>0&&m.each(f,function(p){l(f[p])})}if(m.each(a.areas,function(p){(typeof e.mapOptions=="object"&&(typeof e.mapOptions.map=="object"&&typeof e.mapOptions.map.defaultArea=="object"||typeof e.mapOptions.areas=="object"&&typeof e.mapOptions.areas[p]=="object"||typeof e.mapOptions.legend=="object"&&typeof e.mapOptions.legend.area=="object")||e.replaceOptions===!0)&&(a.areas[p].options=a.getElemOptions(a.options.map.defaultArea,a.options.areas[p]?a.options.areas[p]:{},a.options.legend.area),a.updateElem(a.areas[p],i))}),m.each(a.plots,function(p){(typeof e.mapOptions=="object"&&(typeof e.mapOptions.map=="object"&&typeof e.mapOptions.map.defaultPlot=="object"||typeof e.mapOptions.plots=="object"&&typeof e.mapOptions.plots[p]=="object"||typeof e.mapOptions.legend=="object"&&typeof e.mapOptions.legend.plot=="object")||e.replaceOptions===!0)&&(a.plots[p].options=a.getElemOptions(a.options.map.defaultPlot,a.options.plots[p]?a.options.plots[p]:{},a.options.legend.plot),a.setPlotCoords(a.plots[p]),a.setPlotAttributes(a.plots[p]),a.updateElem(a.plots[p],i))}),m.each(a.links,function(p){(typeof e.mapOptions=="object"&&(typeof e.mapOptions.map=="object"&&typeof e.mapOptions.map.defaultLink=="object"||typeof e.mapOptions.links=="object"&&typeof e.mapOptions.links[p]=="object")||e.replaceOptions===!0)&&(a.links[p].options=a.getElemOptions(a.options.map.defaultLink,a.options.links[p]?a.options.links[p]:{},{}),a.updateElem(a.links[p],i))}),e.mapOptions&&(typeof e.mapOptions.legend=="object"||typeof e.mapOptions.map=="object"&&typeof e.mapOptions.map.defaultArea=="object"||typeof e.mapOptions.map=="object"&&typeof e.mapOptions.map.defaultPlot=="object")&&(m("[data-type='legend-elem']",a.$container).each(function(p,h){m(h).attr("data-hidden")==="1"&&m(h).trigger("click",{hideOtherElems:!1,animDuration:i})}),a.createLegends("area",a.areas,1),a.options.map.width?a.createLegends("plot",a.plots,a.options.map.width/a.mapConf.width):a.createLegends("plot",a.plots,a.$map.width()/a.mapConf.width)),typeof e.setLegendElemsState=="object")m.each(e.setLegendElemsState,function(p,h){var u=a.$container.find("."+p)[0];u!==s&&m("[data-type='legend-elem']",u).each(function(g,n){(m(n).attr("data-hidden")==="0"&&h==="hide"||m(n).attr("data-hidden")==="1"&&h==="show")&&m(n).trigger("click",{hideOtherElems:!1,animDuration:i})})});else{var v=e.setLegendElemsState==="hide"?"hide":"show";m("[data-type='legend-elem']",a.$container).each(function(p,h){(m(h).attr("data-hidden")==="0"&&v==="hide"||m(h).attr("data-hidden")==="1"&&v==="show")&&m(h).trigger("click",{hideOtherElems:!1,animDuration:i})})}a.initDelegatedCustomEvents(),e.afterUpdate&&e.afterUpdate(a.$container,a.paper,a.areas,a.plots,a.options,a.links)}},setPlotCoords:function(t){var e=this;if(t.options.x!==s&&t.options.y!==s)t.coords={x:t.options.x,y:t.options.y};else if(t.options.plotsOn!==s&&e.areas[t.options.plotsOn]!==s){var a=e.areas[t.options.plotsOn].mapElem.getBBox();t.coords={x:a.cx,y:a.cy}}else t.coords=e.mapConf.getCoords(t.options.latitude,t.options.longitude)},setPlotAttributes:function(t){t.options.type==="square"?(t.options.attrs.width=t.options.size,t.options.attrs.height=t.options.size,t.options.attrs.x=t.coords.x-t.options.size/2,t.options.attrs.y=t.coords.y-t.options.size/2):t.options.type==="image"?(t.options.attrs.src=t.options.url,t.options.attrs.width=t.options.width,t.options.attrs.height=t.options.height,t.options.attrs.x=t.coords.x-t.options.width/2,t.options.attrs.y=t.coords.y-t.options.height/2):t.options.type==="svg"?(t.options.attrs.path=t.options.path,t.options.attrs.transform===s&&(t.options.attrs.transform=""),t.mapElem.originalBBox===s&&(t.mapElem.originalBBox=t.mapElem.getBBox()),t.mapElem.baseTransform="m"+t.options.width/t.mapElem.originalBBox.width+",0,0,"+t.options.height/t.mapElem.originalBBox.height+","+(t.coords.x-t.options.width/2)+","+(t.coords.y-t.options.height/2),t.options.attrs.transform=t.mapElem.baseTransform+t.options.attrs.transform):(t.options.attrs.x=t.coords.x,t.options.attrs.y=t.coords.y,t.options.attrs.r=t.options.size/2)},drawLinksCollection:function(t){var e=this,a={},o={},i={},r={},l={};return m.each(t,function(f){var v=e.getElemOptions(e.options.map.defaultLink,t[f],{});if(typeof t[f].between[0]=="string"?a=e.options.plots[t[f].between[0]]:a=t[f].between[0],typeof t[f].between[1]=="string"?o=e.options.plots[t[f].between[1]]:o=t[f].between[1],a.plotsOn!==s&&e.areas[a.plotsOn]!==s){var p=e.areas[a.plotsOn].mapElem.getBBox();i={x:p.cx,y:p.cy}}else a.latitude!==s&&a.longitude!==s?i=e.mapConf.getCoords(a.latitude,a.longitude):(i.x=a.x,i.y=a.y);if(o.plotsOn!==s&&e.areas[o.plotsOn]!==s){var h=e.areas[o.plotsOn].mapElem.getBBox();r={x:h.cx,y:h.cy}}else o.latitude!==s&&o.longitude!==s?r=e.mapConf.getCoords(o.latitude,o.longitude):(r.x=o.x,r.y=o.y);l[f]=e.drawLink(f,i.x,i.y,r.x,r.y,v)}),l},drawLink:function(t,e,a,o,i,r){var l=this,f={options:r},v=(e+o)/2,p=(a+i)/2,h=-1/((i-a)/(o-e)),u=p-h*v,g=Math.sqrt((o-e)*(o-e)+(i-a)*(i-a)),n=1+h*h,x=-2*v+2*h*u-2*h*p,y=v*v+u*u-u*p-p*u+p*p-r.factor*g*(r.factor*g),d=x*x-4*n*y,c=0,C=0;return r.factor>0?(c=(-x+Math.sqrt(d))/(2*n),C=h*c+u):(c=(-x-Math.sqrt(d))/(2*n),C=h*c+u),f.mapElem=l.paper.path("m "+e+","+a+" C "+c+","+C+" "+o+","+i+" "+o+","+i),l.initElem(t,"link",f),f},isAttrsChanged:function(t,e){for(var a in e)if(e.hasOwnProperty(a)&&typeof t[a]>"u"||e[a]!==t[a])return!0;return!1},updateElem:function(t,e){var a=this,o,i,r;if(t.options.toFront===!0&&t.mapElem.toFront(),t.options.href!==s?(t.options.attrs.cursor="pointer",t.options.text&&(t.options.text.attrs.cursor="pointer")):t.mapElem.attrs.cursor==="pointer"&&(t.options.attrs.cursor="auto",t.options.text&&(t.options.text.attrs.cursor="auto")),t.textElem){t.options.text.attrs.text=t.options.text.content,o=t.mapElem.getBBox(),(t.options.size||t.options.width&&t.options.height)&&(t.options.type==="image"||t.options.type==="svg"?(i=(t.options.width-o.width)/2,r=(t.options.height-o.height)/2):(i=(t.options.size-o.width)/2,r=(t.options.size-o.height)/2),o.x-=i,o.x2+=i,o.y-=r,o.y2+=r);var l=a.getTextPosition(o,t.options.text.position,t.options.text.margin);t.options.text.attrs.x=l.x,t.options.text.attrs.y=l.y,t.options.text.attrs["text-anchor"]=l.textAnchor,a.setHoverOptions(t.textElem,t.options.text.attrs,t.options.text.attrsHover),a.isAttrsChanged(t.textElem.attrs,t.options.text.attrs)&&a.animate(t.textElem,t.options.text.attrs,e)}a.setHoverOptions(t.mapElem,t.options.attrs,t.options.attrsHover),a.isAttrsChanged(t.mapElem.attrs,t.options.attrs)&&a.animate(t.mapElem,t.options.attrs,e),t.options.cssClass!==s&&m(t.mapElem.node).removeClass().addClass(t.options.cssClass)},drawPlot:function(t){var e=this,a={};return a.options=e.getElemOptions(e.options.map.defaultPlot,e.options.plots[t]?e.options.plots[t]:{},e.options.legend.plot),e.setPlotCoords(a),a.options.type==="svg"&&(a.mapElem=e.paper.path(a.options.path)),e.setPlotAttributes(a),a.options.type==="square"?a.mapElem=e.paper.rect(a.options.attrs.x,a.options.attrs.y,a.options.attrs.width,a.options.attrs.height):a.options.type==="image"?a.mapElem=e.paper.image(a.options.attrs.src,a.options.attrs.x,a.options.attrs.y,a.options.attrs.width,a.options.attrs.height):a.options.type==="svg"||(a.mapElem=e.paper.circle(a.options.attrs.x,a.options.attrs.y,a.options.attrs.r)),e.initElem(t,"plot",a),a},setEventHandlers:function(t,e,a){var o=this;m.each(a.options.eventHandlers,function(i){o.customEventHandlers[i]===s&&(o.customEventHandlers[i]={}),o.customEventHandlers[i][e]===s&&(o.customEventHandlers[i][e]={}),o.customEventHandlers[i][e][t]=a})},drawLegend:function(t,e,a,o,i){var r=this,l={},f={},v=0,p=0,h=null,u=null,g={},n=0,x=0,y=0,d=0,c=[];l=m("."+t.cssClass,r.$container);var C=l.html();for(l.empty(),f=new B(l.get(0)),m(f.canvas).attr({"data-legend-type":e,"data-legend-id":i}),p=v=0,t.title&&t.title!==""&&(h=f.text(t.marginLeftTitle,0,t.title).attr(t.titleAttrs),u=h.getBBox(),h.attr({y:.5*u.height}),v=t.marginLeftTitle+u.width,p+=t.marginBottomTitle+u.height),n=0;n<t.slices.length;++n){var k=0;c[n]=m.extend(!0,{},e==="plot"?r.options.map.defaultPlot:r.options.map.defaultArea,t.slices[n]),t.slices[n].legendSpecificAttrs===s&&(t.slices[n].legendSpecificAttrs={}),m.extend(!0,c[n].attrs,t.slices[n].legendSpecificAttrs),e==="area"?(c[n].attrs.width===s&&(c[n].attrs.width=30),c[n].attrs.height===s&&(c[n].attrs.height=20)):c[n].type==="square"?(c[n].attrs.width===s&&(c[n].attrs.width=c[n].size),c[n].attrs.height===s&&(c[n].attrs.height=c[n].size)):c[n].type==="image"||c[n].type==="svg"?(c[n].attrs.width===s&&(c[n].attrs.width=c[n].width),c[n].attrs.height===s&&(c[n].attrs.height=c[n].height)):c[n].attrs.r===s&&(c[n].attrs.r=c[n].size/2),k=t.marginBottomTitle,h&&(k+=u.height),e==="plot"&&(c[n].type===s||c[n].type==="circle")?k+=o*c[n].attrs.r:k+=o*c[n].attrs.height/2,d=Math.max(d,k)}for(t.mode==="horizontal"&&(v=t.marginLeft),n=0;n<c.length;++n){var z={},E={},L={};if(c[n].display===s||c[n].display===!0){if(e==="area"||c[n].type==="square"?(t.mode==="horizontal"?(x=v+t.marginLeft,y=d-.5*o*c[n].attrs.height):(x=t.marginLeft,y=p),z=f.rect(x,y,o*c[n].attrs.width,o*c[n].attrs.height)):c[n].type==="image"||c[n].type==="svg"?(t.mode==="horizontal"?(x=v+t.marginLeft,y=d-.5*o*c[n].attrs.height):(x=t.marginLeft,y=p),c[n].type==="image"?z=f.image(c[n].url,x,y,o*c[n].attrs.width,o*c[n].attrs.height):(z=f.path(c[n].path),c[n].attrs.transform===s&&(c[n].attrs.transform=""),E=z.getBBox(),c[n].attrs.transform="m"+o*c[n].width/E.width+",0,0,"+o*c[n].height/E.height+","+x+","+y+c[n].attrs.transform)):(t.mode==="horizontal"?(x=v+t.marginLeft+o*c[n].attrs.r,y=d):(x=t.marginLeft+o*c[n].attrs.r,y=p+o*c[n].attrs.r),z=f.circle(x,y,o*c[n].attrs.r)),delete c[n].attrs.width,delete c[n].attrs.height,delete c[n].attrs.r,z.attr(c[n].attrs),E=z.getBBox(),t.mode==="horizontal"?(x=v+t.marginLeft+E.width+t.marginLeftLabel,y=d):(x=t.marginLeft+E.width+t.marginLeftLabel,y=p+E.height/2),L=f.text(x,y,c[n].label).attr(t.labelAttrs),t.mode==="horizontal"){var A=t.marginBottom+E.height;v+=t.marginLeft+E.width+t.marginLeftLabel+L.getBBox().width,c[n].type!=="image"&&e!=="area"&&(A+=t.marginBottomTitle),h&&(A+=u.height),p=Math.max(p,A)}else v=Math.max(v,t.marginLeft+E.width+t.marginLeftLabel+L.getBBox().width),p+=t.marginBottom+E.height;m(z.node).attr({"data-legend-id":i,"data-legend-type":e,"data-type":"legend-elem","data-id":n,"data-hidden":0}),m(L.node).attr({"data-legend-id":i,"data-legend-type":e,"data-type":"legend-label","data-id":n,"data-hidden":0}),g[n]={mapElem:z,textElem:L},t.hideElemsOnClick.enabled&&(L.attr({cursor:"pointer"}),z.attr({cursor:"pointer"}),r.setHoverOptions(z,c[n].attrs,c[n].attrs),r.setHoverOptions(L,t.labelAttrs,t.labelAttrsHover),c[n].clicked!==s&&c[n].clicked===!0&&r.handleClickOnLegendElem(g[n],n,i,e,{hideOtherElems:!1}))}}return B.type!=="SVG"&&t.VMLWidth&&(v=t.VMLWidth),f.setSize(v,p),{container:l,initialHTMLContent:C,elems:g}},handleClickOnLegendElem:function(t,e,a,o,i){var r=this,l;i=i||{},m.isArray(r.options.legend[o])?l=r.options.legend[o][a]:l=r.options.legend[o];var f=t.mapElem,v=t.textElem,p=m(f.node),h=m(v.node),u=l.slices[e],g=o==="area"?r.areas:r.plots,n=i.animDuration!==s?i.animDuration:l.hideElemsOnClick.animDuration,x=p.attr("data-hidden"),y=x==="0"?{"data-hidden":"1"}:{"data-hidden":"0"};x==="0"?r.animate(v,{opacity:.5},n):r.animate(v,{opacity:1},n),m.each(g,function(d){var c,C=g[d].mapElem.data("hidden-by");C===s&&(C={}),m.isArray(g[d].options.value)?c=g[d].options.value[a]:c=g[d].options.value,r.getLegendSlice(c,l)===u&&(x==="0"?(C[a]=!0,r.setElementOpacity(g[d],l.hideElemsOnClick.opacity,n)):(delete C[a],m.isEmptyObject(C)&&r.setElementOpacity(g[d],g[d].mapElem.originalAttrs.opacity!==s?g[d].mapElem.originalAttrs.opacity:1,n)),g[d].mapElem.data("hidden-by",C))}),p.attr(y),h.attr(y),(i.hideOtherElems===s||i.hideOtherElems===!0)&&l.exclusive===!0&&m("[data-type='legend-elem'][data-hidden=0]",r.$container).each(function(){var d=m(this);d.attr("data-id")!==e&&d.trigger("click",{hideOtherElems:!1})})},createLegends:function(t,e,a){var o=this,i=o.options.legend[t];m.isArray(o.options.legend[t])||(i=[o.options.legend[t]]),o.legends[t]={};for(var r=0;r<i.length;++r)i[r].display===!0&&m.isArray(i[r].slices)&&i[r].slices.length>0&&i[r].cssClass!==""&&m("."+i[r].cssClass,o.$container).length!==0&&(o.legends[t][r]=o.drawLegend(i[r],t,e,a,r))},setHoverOptions:function(t,e,a){B.type!=="SVG"&&delete a.transform,t.attrsHover=a,t.attrsHover.transform?t.originalAttrs=m.extend({transform:"s1"},e):t.originalAttrs=e},elemEnter:function(t){var e=this;if(t!==s){if(t.mapElem!==s&&e.animate(t.mapElem,t.mapElem.attrsHover,t.mapElem.attrsHover.animDuration),t.textElem!==s&&e.animate(t.textElem,t.textElem.attrsHover,t.textElem.attrsHover.animDuration),t.options&&t.options.tooltip!==s){var a="";e.$tooltip.removeClass().addClass(e.options.map.tooltip.cssClass),t.options.tooltip.content!==s&&(typeof t.options.tooltip.content=="function"?a=t.options.tooltip.content(t.mapElem):a=t.options.tooltip.content),t.options.tooltip.cssClass!==s&&e.$tooltip.addClass(t.options.tooltip.cssClass),e.$tooltip.html(a).css("display","block")}(t.mapElem!==s||t.textElem!==s)&&e.paper.safari&&e.paper.safari()}},elemHover:function(t,e){var a=this;if(t!==s&&t.options.tooltip!==s){var o=e.pageX,i=e.pageY,r=10,l=20;typeof t.options.tooltip.offset=="object"&&(typeof t.options.tooltip.offset.left<"u"&&(r=t.options.tooltip.offset.left),typeof t.options.tooltip.offset.top<"u"&&(l=t.options.tooltip.offset.top));var f={left:Math.min(a.$map.width()-a.$tooltip.outerWidth()-5,o-a.$map.offset().left+r),top:Math.min(a.$map.height()-a.$tooltip.outerHeight()-5,i-a.$map.offset().top+l)};typeof t.options.tooltip.overflow=="object"&&(t.options.tooltip.overflow.right===!0&&(f.left=o-a.$map.offset().left+10),t.options.tooltip.overflow.bottom===!0&&(f.top=i-a.$map.offset().top+20)),a.$tooltip.css(f)}},elemOut:function(t){var e=this;t!==s&&(t.mapElem!==s&&e.animate(t.mapElem,t.mapElem.originalAttrs,t.mapElem.attrsHover.animDuration),t.textElem!==s&&e.animate(t.textElem,t.textElem.originalAttrs,t.textElem.attrsHover.animDuration),t.options&&t.options.tooltip!==s&&e.$tooltip.css({display:"none",top:-1e3,left:-1e3}),(t.mapElem!==s||t.textElem!==s)&&e.paper.safari&&e.paper.safari())},elemClick:function(t){var e=this;t!==s&&!e.panning&&t.options.href!==s&&window.open(t.options.href,t.options.target)},getElemOptions:function(t,e,a){var o=this,i=m.extend(!0,{},t,e);if(i.value!==s)if(m.isArray(a))for(var r=0;r<a.length;++r)i=m.extend(!0,{},i,o.getLegendSlice(i.value[r],a[r]));else i=m.extend(!0,{},i,o.getLegendSlice(i.value,a));return i},getTextPosition:function(t,e,a){var o=0,i=0,r="";switch(typeof a=="number"&&(e==="bottom"||e==="top"?a={x:0,y:a}:e==="right"||e==="left"?a={x:a,y:0}:a={x:0,y:0}),e){case"bottom":o=(t.x+t.x2)/2+a.x,i=t.y2+a.y,r="middle";break;case"top":o=(t.x+t.x2)/2+a.x,i=t.y-a.y,r="middle";break;case"left":o=t.x-a.x,i=(t.y+t.y2)/2+a.y,r="end";break;case"right":o=t.x2+a.x,i=(t.y+t.y2)/2+a.y,r="start";break;default:o=(t.x+t.x2)/2+a.x,i=(t.y+t.y2)/2+a.y,r="middle"}return{x:o,y:i,textAnchor:r}},getLegendSlice:function(t,e){for(var a=0;a<e.slices.length;++a)if(e.slices[a].sliceValue!==s&&t===e.slices[a].sliceValue||e.slices[a].sliceValue===s&&(e.slices[a].min===s||t>=e.slices[a].min)&&(e.slices[a].max===s||t<=e.slices[a].max))return e.slices[a];return{}},animateViewBox:function(t,e,a,o,i,r){var l=this,f=l.currentViewBox.x,v=t-f,p=l.currentViewBox.y,h=e-p,u=l.currentViewBox.w,g=a-u,n=l.currentViewBox.h,x=o-n;l.zoomAnimCVBTarget||(l.zoomAnimCVBTarget={x:t,y:e,w:a,h:o});var y=u>a?"in":"out",d=B.easing_formulas[r||"linear"],c=i-i*2/100,C=l.zoomAnimStartTime;l.zoomAnimStartTime=new Date().getTime();var k=function(){l.cancelAnimationFrame(l.zoomAnimID);var z=new Date().getTime()-l.zoomAnimStartTime;if(z<c){var E,L,A,T;if(C&&l.zoomAnimCVBTarget&&l.zoomAnimCVBTarget.w!==a){var q=new Date().getTime()-C,M=d(q/i);E=f+(l.zoomAnimCVBTarget.x-f)*M,L=p+(l.zoomAnimCVBTarget.y-p)*M,A=u+(l.zoomAnimCVBTarget.w-u)*M,T=n+(l.zoomAnimCVBTarget.h-n)*M,f=E,v=t-f,p=L,h=e-p,u=A,g=a-u,n=T,x=o-n,l.zoomAnimCVBTarget={x:t,y:e,w:a,h:o}}else{var V=d(z/i);E=f+v*V,L=p+h*V,A=u+g*V,T=n+x*V}y==="in"&&(A>l.currentViewBox.w||A<a)||y==="out"&&(A<l.currentViewBox.w||A>a)||l.setViewBox(E,L,A,T),l.zoomAnimID=l.requestAnimationFrame(k)}else l.zoomAnimStartTime=null,l.zoomAnimCVBTarget=null,l.currentViewBox.w!==a&&l.setViewBox(t,e,a,o),l.$map.trigger("afterZoom",{x1:t,y1:e,x2:t+a,y2:e+o})};k()},requestAnimationFrame:function(t){return this._requestAnimationFrameFn.call(window,t)},cancelAnimationFrame:function(t){this._cancelAnimationFrameFn.call(window,t)},_requestAnimationFrameFn:function(){var t=function(){var e=new Date().getTime();return function(a){var o=new Date().getTime();if(o-e>16)e=o,a(o);else return setTimeout(function(){t(a)},0)}}();return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||t}(),_cancelAnimationFrameFn:function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||clearTimeout}(),setViewBox:function(t,e,a,o){var i=this;i.currentViewBox.x=t,i.currentViewBox.y=e,i.currentViewBox.w=a,i.currentViewBox.h=o,i.paper.setViewBox(t,e,a,o,!1)},_nonAnimatedAttrs:["arrow-end","arrow-start","gradient","class","cursor","text-anchor","font","font-family","font-style","font-weight","letter-spacing","src","href","target","title","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit"],animate:function(t,e,a,o){var i=this;if(t)if(a>0){for(var r={},l=0;l<i._nonAnimatedAttrs.length;l++){var f=i._nonAnimatedAttrs[l];e[f]!==s&&(r[f]=e[f])}t.attr(r),t.animate(e,a,"linear",function(){o&&o()})}else t.attr(e),o&&o()},isRaphaelBBoxBugPresent:function(){var t=this,e=t.paper.text(-50,-50,"TEST"),a=e.getBBox();return e.remove(),a.width===0&&a.height===0},defaultOptions:{map:{cssClass:"map",tooltip:{cssClass:"mapTooltip"},defaultArea:{attrs:{fill:"#343434",stroke:"#5d5d5d","stroke-width":1,"stroke-linejoin":"round"},attrsHover:{fill:"#f38a03",animDuration:300},text:{position:"inner",margin:10,attrs:{"font-size":15,fill:"#c7c7c7"},attrsHover:{fill:"#eaeaea",animDuration:300}},target:"_self",cssClass:"area"},defaultPlot:{type:"circle",size:15,attrs:{fill:"#0088db",stroke:"#fff","stroke-width":0,"stroke-linejoin":"round"},attrsHover:{"stroke-width":3,animDuration:300},text:{position:"right",margin:10,attrs:{"font-size":15,fill:"#c7c7c7"},attrsHover:{fill:"#eaeaea",animDuration:300}},target:"_self",cssClass:"plot"},defaultLink:{factor:.5,attrs:{stroke:"#0088db","stroke-width":2},attrsHover:{animDuration:300},text:{position:"inner",margin:10,attrs:{"font-size":15,fill:"#c7c7c7"},attrsHover:{fill:"#eaeaea",animDuration:300}},target:"_self",cssClass:"link"},zoom:{enabled:!1,minLevel:0,maxLevel:10,step:.25,mousewheel:!0,touch:!0,animDuration:200,animEasing:"linear",buttons:{reset:{cssClass:"zoomButton zoomReset",content:"&#8226;",title:"Reset zoom"},in:{cssClass:"zoomButton zoomIn",content:"+",title:"Zoom in"},out:{cssClass:"zoomButton zoomOut",content:"&#8722;",title:"Zoom out"}}}},legend:{redrawOnResize:!0,area:[],plot:[]},areas:{},plots:{},links:{}},legendDefaultOptions:{area:{cssClass:"areaLegend",display:!0,marginLeft:10,marginLeftTitle:5,marginBottomTitle:10,marginLeftLabel:10,marginBottom:10,titleAttrs:{"font-size":16,fill:"#343434","text-anchor":"start"},labelAttrs:{"font-size":12,fill:"#343434","text-anchor":"start"},labelAttrsHover:{fill:"#787878",animDuration:300},hideElemsOnClick:{enabled:!0,opacity:.2,animDuration:300},slices:[],mode:"vertical"},plot:{cssClass:"plotLegend",display:!0,marginLeft:10,marginLeftTitle:5,marginBottomTitle:10,marginLeftLabel:10,marginBottom:10,titleAttrs:{"font-size":16,fill:"#343434","text-anchor":"start"},labelAttrs:{"font-size":12,fill:"#343434","text-anchor":"start"},labelAttrsHover:{fill:"#787878",animDuration:300},hideElemsOnClick:{enabled:!0,opacity:.2,animDuration:300},slices:[],mode:"vertical"}}},D.version=P,m[w]===s&&(m[w]=D),m.fn[w]=function(t){return this.each(function(){m.data(this,w)&&m.data(this,w).destroy(),m.data(this,w,new D(this,t))})},D})}(R)),b}export{U as r};
